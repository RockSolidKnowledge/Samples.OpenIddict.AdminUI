"use strict";(self.webpackChunkadmin_ui_openiddict=self.webpackChunkadmin_ui_openiddict||[]).push([[46],{46:(te,x,s)=>{s.r(x),s.d(x,{ClientsModule:()=>Kt});var R=s(177),l=s(9417),f=s(1583),I=s(7005),t=s(4438),y=s(4772),B=s(3583),g=s(1780),$=s(5794),N=s(5424),j=s(3680),A=s(6719),D=s(251),Y=s(6406),J=s(6728),H=s(7778);const O=(n,o)=>({title:n,link:o}),K=n=>[n];let Q=(()=>{class n{constructor(e,a,i,r,p,C,E){this.clientService=e,this.clientCache=a,this.localize=i,this.translate=r,this.router=p,this.toastr=C,this.errorService=E}get saveDisabled(){const e=Array.from(this.clientCache.componentDirtyValidMap.values());return this.clientCache.componentDirtyValidMap.size<1||e.includes(!1)}ngOnInit(){this.subscriptions=[this.clientCache.unsavedCache$.subscribe({next:e=>{this.currentClient=e}})]}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}saveClient(){this.clientService.update(this.currentClient.clientId,this.currentClient).subscribe({next:e=>{const a=this.translate.instant("Notifications.Saving Success Title"),i=this.translate.instant("Clients.UpdatedClient");this.clientCache.componentDirtyValidMap.clear(),this.toastr.success(i,a)},error:e=>{const a={toastBody:this.translate.instant("Notifications.Saving Error Title"),toastTitle:this.translate.instant("Notifications.Saving Client Message")};this.errorService.handleError(e,a)}})}cloneClient(){this.toastr.error("Not Yet Implemented!")}deleteClient(){this.clientService.delete(this.currentClient.clientId).subscribe({next:e=>{const a=this.localize.translateRoute("/applications/clients");this.router.navigate([a]);const i=this.translate.instant("Clients.Deleted"),r=`${this.currentClient.displayName} ${this.translate.instant("Common.Delete.Deleted")}`;this.toastr.success(r,i)},error:e=>{const a={toastBody:this.translate.instant("Notifications.Delete Error Title"),toastTitle:this.translate.instant("Notifications.Delete Client Message")};this.errorService.handleError(e,a)}})}get canDeactivate(){return()=>this.saveDisabled}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(y._),t.rXU(B.t),t.rXU(I.QG),t.rXU(g.c$),t.rXU(f.Ix),t.rXU($.tw),t.rXU(N.I))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-edit-client"]],decls:30,vars:38,consts:[["deleteClientModal",""],[3,"title","crumbs","hasTabs"],["tabs",""],[3,"tabTitle","tabValue"],["id","editClient",1,"tw-container","tw-mx-auto"],["id","submitBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"click","disabled"],["id","cloneBtn","type","button",1,"tw-hidden","tw-btn","tw-mr-3","tw-mb-3","xs:tw-inline-flex",3,"click","disabled"],["right",""],["id","deleteBtn","type","button","data-toggle","modal",1,"tw-btn-danger","tw-mb-3",3,"click"],[3,"delete","resourceName"]],template:function(a,i){if(1&a){const r=t.RV6();t.j41(0,"app-title-bar",1),t.nI1(1,"translate"),t.nI1(2,"localize"),t.qex(3,2),t.j41(4,"app-custom-tabs"),t.nrm(5,"app-custom-tab",3)(6,"app-custom-tab",3)(7,"app-custom-tab",3)(8,"app-custom-tab",3)(9,"app-custom-tab",3)(10,"app-custom-tab",3)(11,"app-custom-tab",3),t.k0s(),t.bVm(),t.k0s(),t.j41(12,"div",4),t.nrm(13,"router-outlet"),t.k0s(),t.j41(14,"app-button-bar")(15,"button",5),t.bIt("click",function(){return t.eBV(r),t.Njj(i.saveClient())}),t.j41(16,"span"),t.EFF(17),t.nI1(18,"translate"),t.k0s()(),t.j41(19,"button",6),t.bIt("click",function(){return t.eBV(r),t.Njj(i.cloneClient())}),t.j41(20,"span"),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.qex(23,7),t.j41(24,"button",8),t.bIt("click",function(){t.eBV(r);const C=t.sdS(28);return t.Njj(C.show())}),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.bVm(),t.k0s(),t.j41(27,"app-delete-confirmation-modal",9,0),t.bIt("delete",function(){return t.eBV(r),t.Njj(i.deleteClient())}),t.k0s(),t.nrm(29,"app-can-deactivate")}2&a&&(t.Y8G("title",i.currentClient.displayName)("crumbs",t.eq3(36,K,t.l_i(33,O,t.bMT(1,23,"Nav.Clients"),t.bMT(2,25,"/applications/clients"))))("hasTabs",!0),t.R7$(5),t.Y8G("tabTitle","Nav.Details")("tabValue","details"),t.R7$(),t.Y8G("tabTitle","Nav.Security")("tabValue","security"),t.R7$(),t.Y8G("tabTitle","Nav.ApplicationUrls")("tabValue","applicationUrls"),t.R7$(),t.Y8G("tabTitle","Nav.TokenRequest")("tabValue","tokenRequest"),t.R7$(),t.Y8G("tabTitle","Nav.AllowedScopes")("tabValue","allowedScopes"),t.R7$(),t.Y8G("tabTitle","Nav.Claims")("tabValue","claims"),t.R7$(),t.Y8G("tabTitle","Nav.Advanced")("tabValue","advanced"),t.R7$(4),t.Y8G("disabled",i.saveDisabled),t.R7$(2),t.JRh(t.bMT(18,27,"Common.SaveAll")),t.R7$(2),t.Y8G("disabled",!0),t.R7$(2),t.JRh(t.bMT(22,29,"Clients.Clone.Label")),t.R7$(4),t.SpI(" ",t.bMT(26,31,"Common.Delete.Title")," "),t.R7$(2),t.Y8G("resourceName",i.currentClient.displayName))},dependencies:[j.z,A.G,D.v,Y.z,J.E,H.w,f.n3,I.tl,g.D9],encapsulation:2})}}return n})();var U=s(1413),G=s(6354),z=s(8412),Z=s(9172),q=s(1397),tt=s(1986),M=s(6026),et=s(9838),nt=s(4595),it=s(5435);class at extends it.if{constructor(o,e,a,i,r,p){super(o,e,a),this.activateRoute=i,this.securityService=r,this.router=p}get hasEditPermission(){const e=this.securityService.userPermissions;return!(!e||0===e.length)&&(this.activateRoute.snapshot.data.editPermissions??[]).findIndex(a=>e.includes(a))>=0}navigate(o,e){this.hasEditPermission&&!this.resourcerIsReadOnly(o)?this.router.navigate([e],{relativeTo:this.activateRoute}):this.router.navigate(["view",e],{relativeTo:this.activateRoute})}}var st=s(345),ot=s(779),lt=s(3853),rt=s(7883),ct=s(7294),pt=s(7384),dt=s(7156);class v{constructor(o,e,a=void 0,i=void 0,r=[]){this.destinationKey=o,this.label=e,this.help=a,this.description=i,this.validators=r}}var n,u=function(n){return n[n.None=0]="None",n.SinglePageApplication="SPA",n.LegacySinglePageApplication="SPALegacy",n.WebApplicationPKCE="WebApp",n.NativeApplicationPKCE="Native",n.RobotApplication="Machine",n.DeviceApplication="Device",n.SamlApplication="SamlProvider",n}(u||{});(n=u||(u={})).fromWizardType=function o(e){return n[e]};var L=s(7263),V=s(8698),mt=s(2467);let w=(()=>{class n{constructor(e){this.fb=e}ngOnInit(){this.identifiersForm=this.fb.group({clientId:["",[l.k0.required,l.k0.maxLength(100),l.k0.pattern(/^\S*$/)]],clientName:["",[l.k0.required,l.k0.maxLength(50)]]})}canNext(){return this.identifiersForm.valid}getStepSummary(){const e=new Map;return e.set(this.data.clientIdKey,[this.identifiersForm.value.clientId]),e.set("clientName",[this.identifiersForm.value.clientName]),e}getStepDTO(){const e=this.identifiersForm.value;return e.type=this.data.clientType,e}hosted(){}setRandomID(){this.identifiersForm.patchValue({clientId:(0,L.Nl)()})}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(l.ze))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["ng-component"]],inputs:{data:"data"},decls:16,vars:16,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"],[3,"id","label","help"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text","name","ClientId","id","ClientId","formControlName","clientId",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],["id","genRandomIdBtn",1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-random"],[1,"sr-only"],[3,"id","label","help","isLast"],["id","DisplayName","type","text","name","DisplayName","formControlName","clientName",1,"tw-form-control"]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",1)(5,"app-form-row",2),t.nI1(6,"keyToString"),t.j41(7,"div",3),t.nrm(8,"input",4),t.j41(9,"button",5),t.bIt("click",function(){return i.setRandomID()}),t.nrm(10,"span",6),t.j41(11,"span",7),t.EFF(12),t.nI1(13,"translate"),t.k0s()()()(),t.j41(14,"app-form-row",8),t.nrm(15,"input",9),t.k0s()()),2&a&&(t.R7$(2),t.JRh(t.bMT(3,10,"Clients.EnterBasicDetails")),t.R7$(2),t.Y8G("formGroup",i.identifiersForm),t.R7$(),t.Y8G("id","ClientId")("label",t.bMT(6,12,i.data.clientIdKey))("help","Clients.IDHelp"),t.R7$(7),t.JRh(t.bMT(13,14,"Common.GenerateRandom")),t.R7$(2),t.Y8G("id","DisplayName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp")("isLast",!0))},dependencies:[l.me,l.BC,l.cb,l.j4,l.JD,V.Y,g.D9,mt.C],encapsulation:2})}}return n})();var W=s(3497);class T{constructor(o,e=W.E.Default){this.clientType=o,this.clientIdKey=e}}var m=s(9988),ut=s(7957),c=s(7329),F=s(5313);function ht(n,o){if(1&n&&(t.j41(0,"div",0),t.nrm(1,"p",4),t.nI1(2,"translate"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.data.description),t.npT)}}let b=(()=>{class n{constructor(e){this.fb=e}hosted(){}ngOnInit(){this.simpleStringForm=this.fb.group({value:["",this.data.validators]})}getStepSummary(){const e=new Map,a=this.simpleStringForm.value.value;return(0,L.gP)(a)||e.set(this.data.destinationKey,[a]),e}getStepDTO(){const e={},a=this.simpleStringForm.value.value;return e[this.data.destinationKey]=(0,L.gP)(a)?void 0:a,e}canNext(){return this.simpleStringForm.valid}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(l.ze))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-simple-string-step"]],inputs:{data:"data"},decls:4,vars:6,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"],[3,"id","label","help","isLast"],["type","text","name","SimpleStringValue","id","SimpleStringValue","formControlName","value",1,"tw-form-control"],[3,"innerHTML"]],template:function(a,i){1&a&&(t.DNE(0,ht,3,3,"div",0),t.j41(1,"form",1)(2,"app-form-row",2),t.nrm(3,"input",3),t.k0s()()),2&a&&(t.vxM(0,i.data.description?0:-1),t.R7$(),t.Y8G("formGroup",i.simpleStringForm),t.R7$(),t.Y8G("id","simpleStringValue")("label",i.data.label)("help",i.data.help)("isLast",!0))},dependencies:[l.qT,l.me,l.BC,l.cb,l.j4,l.JD,V.Y,g.D9],encapsulation:2})}}return n})();var Ct=s(7301),gt=s(1410),h=s(8575);let S=(()=>{class n{constructor(e){this.fb=e}ngOnInit(){this.scopesForm=this.fb.group({})}canNext(){return this.scopesForm.valid}getStepSummary(){const e=new Map;return e.set("allowedScopes",[]),e}getStepDTO(){return{allowedScopes:[]}}hosted(){}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(l.ze))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["ng-component"]],inputs:{data:"data"},decls:7,vars:4,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"]],template:function(a,i){1&a&&(t.j41(0,"div",0)(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",1)(5,"p"),t.EFF(6,"TODO: Not yet implemented"),t.k0s()()),2&a&&(t.R7$(2),t.JRh(t.bMT(3,2,"Clients.Scopes.Select")),t.R7$(2),t.Y8G("formGroup",i.scopesForm))},dependencies:[l.cb,l.j4,g.D9],encapsulation:2})}}return n})();class vt extends ut.p{constructor(){super(),this.nameComponentMap.set(m.$.Home,[new c.W(Ct.l,gt.y.OpenIddict)]),this.nameComponentMap.set(m.$.SinglePageApplication,[new c.W(w,new T(u.SinglePageApplication)),new c.W(b,new v("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[l.k0.required,l.k0.pattern("^https?://.*$")])),new c.W(b,new v("logoutUrl","Common.LogoutURL","Clients.LogoutURLDescription","Clients.PostLogoutURL",[l.k0.pattern("^https?://.*$")])),new c.W(S,{})]),this.nameComponentMap.set(m.$.LegacySinglePageApplication,[new c.W(w,new T(u.LegacySinglePageApplication)),new c.W(b,new v("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[l.k0.required,l.k0.pattern("^https?://.*$")])),new c.W(b,new v("logoutUrl","Common.LogoutURL","Clients.LogoutURLDescription","Clients.PostLogoutURL",[l.k0.pattern("^https?://.*$")])),new c.W(S,{})]),this.nameComponentMap.set(m.$.PKCEWebApplication,[new c.W(w,new T(u.WebApplicationPKCE)),new c.W(b,new v("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[l.k0.required,l.k0.pattern("^https?://.*$")])),new c.W(b,new v("logoutUrl","Common.LogoutURL","Clients.LogoutURLDescription","Clients.PostLogoutURL",[l.k0.pattern("^https?://.*$")])),new c.W(S,{})]),this.nameComponentMap.set(m.$.PKCENativeApplication,[new c.W(w,new T(u.NativeApplicationPKCE)),new c.W(b,new v("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[l.k0.required,l.k0.pattern("^https?://.*$")])),new c.W(b,new v("clientSecret","Common.ClientSecret")),new c.W(S,{})]),this.nameComponentMap.set(m.$.DeviceApplication,[new c.W(w,new T(u.DeviceApplication)),new c.W(S,{})]),this.nameComponentMap.set(m.$.RobotApplication,[new c.W(w,new T(u.RobotApplication)),new c.W(b,new v("clientSecret","Common.ClientSecret")),new c.W(S,{})]),this.nameComponentMap.set(m.$.SamlApplication,[new c.W(w,new T(u.SamlApplication,W.E.Saml)),new c.W(F.w,{endpointType:"ACSEndpoint"}),new c.W(F.w,{endpointType:"SLOEndpoint"}),new c.W(F.w,{endpointType:"ARSEndpoint"}),new c.W(S,{})]),this.nameTitleMap.set(m.$.Home,new h.J("Clients.Home.Title","")),this.nameTitleMap.set(m.$.SinglePageApplication,new h.J("Clients.SPA.Setup","Clients.SPA.Title")),this.nameTitleMap.set(m.$.LegacySinglePageApplication,new h.J("Clients.LegacySPA.Setup","Clients.LegacySPA.Title")),this.nameTitleMap.set(m.$.DeviceApplication,new h.J("Clients.DeviceFlow.Setup","Clients.DeviceFlow.Title")),this.nameTitleMap.set(m.$.RobotApplication,new h.J("Clients.MachineToMachine.Setup","Clients.MachineToMachine.Title")),this.nameTitleMap.set(m.$.CIBARobotApplication,new h.J("Clients.CIBAMachineToMachine.Setup","Clients.CIBAMachineToMachine.Title")),this.nameTitleMap.set(m.$.NativeApplication,new h.J("Clients.NativeApp.Setup","Clients.NativeApp.Title")),this.nameTitleMap.set(m.$.PKCENativeApplication,new h.J("Clients.NativeApp.Setup","Clients.NativeApp.Title")),this.nameTitleMap.set(m.$.WebApplication,new h.J("Clients.WebApp.Setup","Clients.WebApp.Title")),this.nameTitleMap.set(m.$.PKCEWebApplication,new h.J("Clients.WebApp.Setup","Clients.PKCEWebApp.Title")),this.nameTitleMap.set(m.$.SamlApplication,new h.J("Clients.Saml.Setup","Clients.Saml.Title"))}getWizard(o){return this.nameComponentMap.get(o)}getWizardTitle(o){return this.nameTitleMap.get(o)}}var bt=s(2420),ft=s(1715);function wt(n,o){if(1&n&&(t.j41(0,"div",5),t.nrm(1,"div",17),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.xc7("width",e.progressPercent+"%"),t.BMQ("aria-valuenow",e.progressPercent)}}function Tt(n,o){}function St(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.nextTab())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("disabled",!e.canNext()),t.R7$(),t.JRh(t.bMT(2,2,"Common.Next"))}}function Rt(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.submit())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"Common.Save")))}function It(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.previousTab())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"Common.Back")))}function yt(n,o){1&n&&(t.j41(0,"a",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"StarterMode.UpgradeAdminUI")))}let Mt=(()=>{class n extends bt.P{constructor(e,a,i,r){super(a,i,r),this.clientsService=e,this.wizardProvider=new vt,this.wizardName=m.$.Home}submit(){const e=this.getWizardDto(),a={type:u.fromWizardType(this.wizardName),clientId:e.clientId,displayName:e.clientName,callbackUrl:e.callbackUrl,logoutUrl:e.logoutUrl,clientSecret:e.clientSecret,allowedScopes:e.allowedScopes};this.clientsService.create(a).subscribe({complete:()=>{this.finishWizard(),this.clearComponents(),this.toastr.success(this.translate.instant("Common.Created")+": "+e.clientName,this.translate.instant("Notifications.SuccessfullyCreated"))},error:i=>{this.errorService.handleError(i)}})}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(y._),t.rXU(N.I),t.rXU($.tw),t.rXU(g.c$))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-client-wizard-host"]],features:[t.Jv_([y._]),t.Vt3],decls:23,vars:15,consts:[[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],[1,"modal-body","scrollbars"],["appStepHost",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["class","tw-btn-success tw-mr-3","id","submitBtn",3,"click",4,"ngIf"],["class","tw-btn","id","backBtn",3,"click",4,"ngIf"],["id","upgradeAdminUI","href","starter-mode/teaser",1,"tw-btn","tw-ml-4"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["role","progressbar",1,"modal-progress-bar"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"click","disabled"],["id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"click"],["id","backBtn",1,"tw-btn",3,"click"]],template:function(a,i){if(1&a&&(t.j41(0,"div",0)(1,"h5",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return i.hideWizard()}),t.nrm(5,"span",3),t.j41(6,"span",4),t.EFF(7),t.nI1(8,"translate"),t.k0s()()(),t.DNE(9,wt,2,3,"div",5),t.j41(10,"div",6),t.DNE(11,Tt,0,0,"ng-template",7),t.k0s(),t.nrm(12,"div",8),t.j41(13,"div",9)(14,"div",10)(15,"div",11),t.DNE(16,St,3,4,"button",12)(17,Rt,3,3,"button",13)(18,It,3,3,"button",14)(19,yt,3,3,"a",15),t.k0s(),t.j41(20,"button",16),t.bIt("click",function(){return i.cancelWizard()}),t.EFF(21),t.nI1(22,"translate"),t.k0s()()()),2&a){let r;t.R7$(),t.Y8G("id",i.titleId),t.R7$(),t.JRh(t.bMT(3,9,null!==(r=null==i.wizardTitles?null:i.wizardTitles.setupTitle)&&void 0!==r?r:"")),t.R7$(5),t.JRh(t.bMT(8,11,"Common.Close")),t.R7$(2),t.vxM(9,i.showProgress?9:-1),t.R7$(7),t.Y8G("ngIf",i.index<(null==i.wizardSteps?null:i.wizardSteps.length)),t.R7$(),t.Y8G("ngIf",i.index==(null==i.wizardSteps?null:i.wizardSteps.length)),t.R7$(),t.Y8G("ngIf",!i.initialStep()),t.R7$(),t.vxM(19,i.initialStep()&&null!=i.asAny&&i.asAny.displayUpgradeIcon?19:-1),t.R7$(2),t.JRh(t.bMT(22,13,"Common.Cancel"))}},dependencies:[R.bT,ft.t,g.D9],encapsulation:2})}}return n})();const $t=(n,o)=>o.clientId,Nt=(n,o)=>({"tw-alert":n,"tw-alert-warning":o}),jt=n=>({limit:n,type:"client applications",href:"https://www.identityserver.com/products/adminui/order-now?index=2&name=Enterprise"});function zt(n,o){if(1&n){const e=t.RV6();t.j41(0,"app-client-wizard-host",10,0),t.bIt("finish",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onFinish())})("hide",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.hideWizard())})("wizardCancel",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.hideWizard())}),t.k0s()}if(2&n){const e=t.XpG();t.Y8G("displayUpgradeIcon",e.licenseInfo.isStarterLicense())}}function Lt(n,o){if(1&n&&(t.j41(0,"div",11),t.nrm(1,"span",12),t.nI1(2,"translate"),t.k0s()),2&n){const e=t.XpG();t.Y8G("ngClass",t.l_i(5,Nt,e.limitReached,e.overLimit)),t.R7$(),t.Y8G("innerHTML",t.i5U(2,2,"Common.QuotaLimit",t.eq3(8,jt,e.licenseInfo.maxClients)),t.npT)}}function Ft(n,o){1&n&&t.nrm(0,"app-simple-loader")}function _t(n,o){if(1&n&&t.DNE(0,Ft,1,0,"app-simple-loader",13),2&n){const e=t.XpG();t.Y8G("ngIf",e.isLoading)}}function kt(n,o){if(1&n){const e=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2),r=t.sdS(3);return t.Njj(i.showWizard(r))}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Clients.Add")," "))}function Et(n,o){1&n&&(t.j41(0,"div",23)(1,"div"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"Clients.None")))}function xt(n,o){1&n&&(t.j41(0,"span",33),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"Common.Reserved")))}function At(n,o){1&n&&(t.nrm(0,"span",35),t.j41(1,"span",8),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"Common.View")))}function Dt(n,o){1&n&&(t.nrm(0,"span",36),t.j41(1,"span",8),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"Common.Edit")))}function Ut(n,o){if(1&n){const e=t.RV6();t.j41(0,"tr",31),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG(3);return t.Njj(r.navigate(i,i.clientId))}),t.j41(1,"td",32)(2,"b"),t.EFF(3),t.k0s()(),t.j41(4,"td"),t.DNE(5,xt,3,3,"span",33),t.k0s(),t.j41(6,"td")(7,"button",34),t.DNE(8,At,4,3)(9,Dt,4,3),t.k0s()()()}if(2&n){const e=o.$implicit,a=t.XpG(3);t.AVh("inactive",a.resourcerIsReadOnly(e)),t.R7$(2),t.AVh("tw-text-blue-500",!(null!=e&&e.reserved)),t.R7$(),t.SpI(" ",null==e?null:e.displayName," "),t.R7$(2),t.vxM(5,null!=e&&e.reserved?5:-1),t.R7$(3),t.vxM(8,a.resourcerIsReadOnly(e)?8:9)}}function Gt(n,o){if(1&n){const e=t.RV6();t.j41(0,"table",25)(1,"thead")(2,"tr")(3,"th",26),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th",27)(7,"span",8),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"th",28)(11,"span",8),t.EFF(12),t.nI1(13,"translate"),t.k0s()()()(),t.j41(14,"tbody"),t.Z7z(15,Ut,10,7,"tr",29,$t),t.k0s()(),t.j41(17,"app-pager",30),t.bIt("onGoToPage",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.pageStream.next(i))}),t.k0s()}if(2&n){const e=t.XpG(2);t.R7$(4),t.JRh(t.bMT(5,6,"Common.Name")),t.R7$(4),t.JRh(t.bMT(9,8,"Common.Reserved")),t.R7$(4),t.JRh(t.bMT(13,10,"Common.Actions")),t.R7$(3),t.Dyx(e.pagedResult.results),t.R7$(2),t.Y8G("totalResults",null==e.pagedResult?null:e.pagedResult.totalCount)("currentPage",e.page)("lastPage",null==e.pagedResult?null:e.pagedResult.pageCount)}}function Vt(n,o){if(1&n){const e=t.RV6();t.j41(0,"app-action-bar"),t.qex(1,14),t.j41(2,"div",15)(3,"label",16),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"select",17),t.mxI("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.DH7(r.pageSize,i)||(r.pageSize=i),t.Njj(i)}),t.bIt("change",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.pageSizeStream.next(+i.pageSize))}),t.j41(7,"option",18),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.j41(10,"option",19),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"option",20),t.EFF(14),t.nI1(15,"translate"),t.k0s()()(),t.bVm(),t.qex(16,21),t.DNE(17,kt,3,3,"button",22),t.bVm(),t.k0s(),t.DNE(18,Et,4,3,"div",23)(19,Gt,18,12)}if(2&n){const e=t.XpG();t.R7$(4),t.Lme("",e.pageSize," ",t.bMT(5,8,"Nav.PerPage"),""),t.R7$(2),t.R50("ngModel",e.pageSize),t.R7$(2),t.SpI("25 ",t.bMT(9,10,"Nav.PerPage"),""),t.R7$(3),t.SpI("50 ",t.bMT(12,12,"Nav.PerPage"),""),t.R7$(3),t.SpI("100 ",t.bMT(15,14,"Nav.PerPage"),""),t.R7$(3),t.vxM(17,e.hasEditPermission?17:-1),t.R7$(),t.vxM(18,(null==e.pagedResult||null==e.pagedResult.results?null:e.pagedResult.results.length)<1?18:19)}}let Wt=(()=>{class n extends at{constructor(e,a,i,r,p,C,E,Qt,Zt,qt){super(e,a,!0,Zt,Qt,qt),this.errorService=i,this.titleService=r,this.modalService=p,this.clientService=C,this.licenseService=E,this.pageSize=25,this.page=1,this.term="",this.pageStream=new U.B,this.pageSizeStream=new U.B,this.mapSearchTerm=this.mapSearchTerm.bind(this)}ngOnInit(){const e=this.translate.instant("Nav.Clients")+" - "+et.$9.SITE_TITLE;this.titleService.setTitle(e);const a=this.pageStream.pipe((0,G.T)(p=>({searchTerm:this.term,page:p,pageSize:this.pageSize}))),i=this.pageSizeStream.pipe((0,G.T)(p=>({searchTerm:this.term,page:this.page,pageSize:p}))),r=a.pipe((0,z.X)(i),(0,z.X)(this.searchSource),(0,z.X)(this.enterKeySource),(0,Z.Z)({searchTerm:this.term,page:this.page,pageSize:this.pageSize}),(0,q.Z)(p=>(this.isLoading=!0,this.page=p.page,this.pageSize=p.pageSize,this.clientService.find(p.searchTerm,p.page,p.pageSize).pipe((0,tt.c)(200)))));this.subscriptions=[r.subscribe({next:p=>{this.pagedResult=p,this.isLoading=!1},error:p=>{this.errorService.handleError(p),this.isLoading=!1}}),this.licenseService.getLicenseInfo().subscribe({next:p=>{this.licenseInfo=p}})]}ngOnDestroy(){this.subscriptions?.forEach(e=>{e.unsubscribe()})}mapSearchTerm(e){return this.term=e,{searchTerm:e,page:1,pageSize:this.pageSize}}reload(){this.pageStream.next(this.page),this.pageSizeStream.next(this.pageSize)}onFinish(){this.hideWizard(),this.reload()}showWizard(e){this.modalService.show(e,{id:M.R.Id,ariaLabelledBy:M.R.TileId,ariaDescribedby:M.R.DescriptionId,backdrop:"static"})}hideWizard(){this.modalService.hide(M.R.Id)}resourcerIsReadOnly(e){const a=nt.I.RestrictedClientTypes.includes(e.type)&&this.licenseInfo.isStarterLicense();return!this.hasEditPermission||e.reserved||this.licenseInfo.overClientLimit||a}static{this.\u0275fac=function(a){return new(a||n)(t.rXU($.tw),t.rXU(g.c$),t.rXU(N.I),t.rXU(st.hE),t.rXU(ot.I8),t.rXU(y._),t.rXU(lt.X),t.rXU(rt.i),t.rXU(f.nX),t.rXU(f.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-list-clients"]],features:[t.Vt3],decls:17,vars:12,consts:[["addClientModal",""],[3,"title"],["id","clientsList",1,"tw-container","tw-mx-auto"],["id","quotaLimitAlert","role","alert","class","tw-mb-4",3,"ngClass",4,"ngIf"],["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","tw-transition-all","tw-ease-in-out"],["for","searchTerm",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","searchTerm","type","search",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","tw-transition-all","tw-ease-in-out",3,"ngModelChange","keyup","ngModel","placeholder"],[3,"finish","hide","wizardCancel","displayUpgradeIcon"],["id","quotaLimitAlert","role","alert",1,"tw-mb-4",3,"ngClass"],[3,"innerHTML"],[4,"ngIf"],["left",""],[1,"tw-hidden","tw-form-select","tw-w-auto","sm:tw-block"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModelChange","change","ngModel"],["value","25"],["value","50"],["value","100"],["right",""],["id","addClientBtn",1,"tw-btn-success"],["id","clientsNone","role","alert",1,"tw-alert"],["id","addClientBtn",1,"tw-btn-success",3,"click"],["id","clientsTable",1,"datatable","selectable","hover"],[1,"lg:tw-w-1/3"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],[1,"group","clientRow",3,"inactive"],[3,"onGoToPage","totalResults","currentPage","lastPage"],[1,"group","clientRow",3,"click"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-pill"],["type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500"],["id","viewOrEditIcon","aria-hidden","true",1,"fas","fa-eye"],["id","viewOrEditIcon","aria-hidden","true",1,"fad","fa-pencil"]],template:function(a,i){if(1&a){const r=t.RV6();t.nrm(0,"app-title-bar",1),t.nI1(1,"translate"),t.DNE(2,zt,2,1,"ng-template",null,0,t.C5r),t.j41(4,"div",2),t.DNE(5,Lt,3,10,"div",3),t.j41(6,"div",4)(7,"div",5)(8,"label",6),t.nrm(9,"span",7),t.j41(10,"span",8),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"input",9),t.nI1(14,"translate"),t.mxI("ngModelChange",function(C){return t.eBV(r),t.DH7(i.searchTerm,C)||(i.searchTerm=C),t.Njj(C)}),t.bIt("keyup",function(C){return t.eBV(r),t.Njj(i.search(C))}),t.k0s()()(),t.DNE(15,_t,1,1,"app-simple-loader")(16,Vt,20,16),t.k0s()}2&a&&(t.Y8G("title",t.bMT(1,6,"Nav.Clients")),t.R7$(5),t.Y8G("ngIf",i.limitReached),t.R7$(6),t.JRh(t.bMT(12,8,"Common.Search")),t.R7$(2),t.FS9("placeholder",t.bMT(14,10,"Clients.SearchPlaceholder")),t.R50("ngModel",i.searchTerm),t.R7$(2),t.vxM(15,i.isLoading?15:16))},dependencies:[R.YU,R.bT,l.xH,l.y7,l.me,l.wz,l.BC,l.vS,j.z,ct.n,pt.d,dt.B,Mt,g.D9],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]})}}return n})();const Pt=(n,o)=>({title:n,link:o}),Xt=n=>[n];let Bt=(()=>{class n{constructor(e){this.route=e}ngOnInit(){this.client=this.route.snapshot.data.client}static{this.\u0275fac=function(a){return new(a||n)(t.rXU(f.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["ng-component"]],decls:14,vars:28,consts:[[3,"title","crumbs","hasTabs","isReadOnly","isReserved"],["tabs",""],[3,"tabTitle","tabValue"],["id","viewClient",1,"tw-container","tw-mx-auto"]],template:function(a,i){1&a&&(t.j41(0,"app-title-bar",0),t.nI1(1,"translate"),t.nI1(2,"localize"),t.qex(3,1),t.j41(4,"app-custom-tabs"),t.nrm(5,"app-custom-tab",2)(6,"app-custom-tab",2)(7,"app-custom-tab",2)(8,"app-custom-tab",2)(9,"app-custom-tab",2)(10,"app-custom-tab",2)(11,"app-custom-tab",2),t.k0s(),t.bVm(),t.k0s(),t.j41(12,"div",3),t.nrm(13,"router-outlet"),t.k0s()),2&a&&(t.Y8G("title",i.client.displayName)("crumbs",t.eq3(26,Xt,t.l_i(23,Pt,t.bMT(1,19,"Nav.Clients"),t.bMT(2,21,"/applications/clients"))))("hasTabs",!0)("isReadOnly",!0)("isReserved",i.client.reserved),t.R7$(5),t.Y8G("tabTitle","Nav.Details")("tabValue","details"),t.R7$(),t.Y8G("tabTitle","Nav.Security")("tabValue","security"),t.R7$(),t.Y8G("tabTitle","Nav.ApplicationUrls")("tabValue","applicationUrls"),t.R7$(),t.Y8G("tabTitle","Nav.TokenRequest")("tabValue","tokenRequest"),t.R7$(),t.Y8G("tabTitle","Nav.AllowedScopes")("tabValue","allowedScopes"),t.R7$(),t.Y8G("tabTitle","Nav.Claims")("tabValue","claims"),t.R7$(),t.Y8G("tabTitle","Nav.Advanced")("tabValue","advanced"))},dependencies:[j.z,A.G,D.v,f.n3,I.tl,g.D9],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]})}}return n})();var P=s(1519),d=s(3178),_=s(4446),Yt=s(9962),k=s(2892),Jt=s(8416);const X=[{path:"",component:Wt,canActivate:[k.h,_._],data:{permissions:[d.a[d.a.IdentityServerManager],d.a[d.a.IdentityServerManagerReadOnly],d.a[d.a.AllReadOnly],d.a[d.a.All]],editPermissions:[d.a[d.a.IdentityServerManager],d.a[d.a.All]]}},{path:":id",component:Q,loadChildren:()=>Promise.resolve().then(s.bind(s,224)).then(n=>n.EditClientModule),resolve:{client:P.i},canActivate:[k.h,_._,Yt.m],canDeactivate:[Jt.M],data:{permissions:[d.a[d.a.IdentityServerManager],d.a[d.a.All]]}},{path:"view/:id",component:Bt,loadChildren:()=>Promise.resolve().then(s.bind(s,8536)).then(n=>n.ViewClientModule),resolve:{client:P.i},canActivate:[k.h,_._],data:{permissions:[d.a[d.a.IdentityServerManager],d.a[d.a.IdentityServerManagerReadOnly],d.a[d.a.AllReadOnly],d.a[d.a.All]]}}];let Ht=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(X),I.XE.forChild(X),f.iI]})}}return n})();var Ot=s(8389);let Kt=(()=>{class n{static{this.\u0275fac=function(a){return new(a||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[R.MD,l.YN,l.X1,Ot.w,Ht]})}}return n})()}}]);