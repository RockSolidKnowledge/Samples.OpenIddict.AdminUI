"use strict";(self.webpackChunkadmin_ui_openiddict=self.webpackChunkadmin_ui_openiddict||[]).push([[899],{899:(Kt,Y,l)=>{l.r(Y),l.d(Y,{ApplicationsModule:()=>de});var T=l(1780),V=l(7005),d=l(177),h=l(9417),R=l(1583),z=l(1413),e=l(6354),F=l(8412),j=l(9172),M=l(1397),Q=l(1986),_=l(4313),G=l(6026),rt=l(9838),ct=l(4595),P=l(7263),t=l(4438),W=l(5794),O=l(5424),pt=l(345),dt=l(779),Z=l(1626);class ut{constructor(m,i){this.http=m,this.headersService=i,this.headers=i.setHeaders()}create(m){return this.http.post(this.actionUrl,m,{headers:this.headers})}clone(m,i){return this.http.post(`${this.actionUrl}/${m}/clone`,i,{headers:this.headers})}delete(m){return this.http.delete(`${this.actionUrl}/${m}`,{headers:this.headers})}getByResourceId(m){return this.http.get(`${this.actionUrl}/${m}`,{headers:this.headers})}find(m,i,c){let p=new Z.Nl;return(0,P.gP)(m)||(p=p.append("query",m)),i&&(p=p.append("page",i)),c&&(p=p.append("pageSize",c)),this.http.get(this.actionUrl,{headers:this.headers,params:p})}update(m,i){return this.http.put(`${this.actionUrl}/${m}`,i,{headers:this.headers})}}var mt=l(9564);let X=(()=>{class o extends ut{constructor(i,c){super(i,c),this.actionUrl="application/clients"}updateSecret(i,c){return this.http.put(`${this.actionUrl}/${i}/secret`,c,{headers:this.headers})}static{this.\u0275fac=function(c){return new(c||o)(t.KVO(Z.Qq),t.KVO(mt.m))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var ht=l(3853),Ct=l(7883),L=l(3680),q=l(7294),ft=l(7384),tt=l(7156);class ${constructor(m,i,c=void 0,p=void 0,C=[]){this.destinationKey=m,this.label=i,this.help=c,this.description=p,this.validators=C}}var o,I=function(o){return o[o.None=0]="None",o.SinglePageApplication="SPA",o.LegacySinglePageApplication="SPALegacy",o.WebApplicationPKCE="WebApp",o.NativeApplicationPKCE="Native",o.RobotApplication="Machine",o.DeviceApplication="Device",o.SamlApplication="SamlProvider",o}(I||{});(o=I||(I={})).fromWizardType=function m(i){return o[i]};var J=l(8698),et=l(2467);let D=(()=>{class o{constructor(i){this.fb=i}ngOnInit(){this.identifiersForm=this.fb.group({clientId:["",[h.k0.required,h.k0.maxLength(100),h.k0.pattern(/^\S*$/)]],clientName:["",[h.k0.required,h.k0.maxLength(50)]]})}canNext(){return this.identifiersForm.valid}getStepSummary(){const i=new Map;return i.set(this.data.clientIdKey,[this.identifiersForm.value.clientId]),i.set("clientName",[this.identifiersForm.value.clientName]),i}getStepDTO(){const i=this.identifiersForm.value;return i.type=this.data.clientType,i}hosted(){}setRandomID(){this.identifiersForm.patchValue({clientId:(0,P.Nl)()})}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(h.ze))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],inputs:{data:"data"},decls:16,vars:16,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"],[3,"id","label","help"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],["type","text","name","ClientId","id","ClientId","formControlName","clientId",1,"tw-form-control","tw-rounded-r-none","tw-border-r-0"],["id","genRandomIdBtn",1,"tw-btn","tw-rounded-l-none",3,"click"],["aria-hidden","true",1,"far","fa-random"],[1,"sr-only"],[3,"id","label","help","isLast"],["id","DisplayName","type","text","name","DisplayName","formControlName","clientName",1,"tw-form-control"]],template:function(c,p){1&c&&(t.j41(0,"div",0)(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",1)(5,"app-form-row",2),t.nI1(6,"keyToString"),t.j41(7,"div",3),t.nrm(8,"input",4),t.j41(9,"button",5),t.bIt("click",function(){return p.setRandomID()}),t.nrm(10,"span",6),t.j41(11,"span",7),t.EFF(12),t.nI1(13,"translate"),t.k0s()()()(),t.j41(14,"app-form-row",8),t.nrm(15,"input",9),t.k0s()()),2&c&&(t.R7$(2),t.JRh(t.bMT(3,10,"Clients.EnterBasicDetails")),t.R7$(2),t.Y8G("formGroup",p.identifiersForm),t.R7$(),t.Y8G("id","ClientId")("label",t.bMT(6,12,p.data.clientIdKey))("help","Clients.IDHelp"),t.R7$(7),t.JRh(t.bMT(13,14,"Common.GenerateRandom")),t.R7$(2),t.Y8G("id","DisplayName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp")("isLast",!0))},dependencies:[h.me,h.BC,h.cb,h.j4,h.JD,J.Y,T.D9,et.C],encapsulation:2})}}return o})();var nt=l(3497);class x{constructor(m,i=nt.E.Default){this.clientType=m,this.clientIdKey=i}}var w=l(9988),it=l(7957),f=l(7329),K=l(5313);function vt(o,m){if(1&o&&(t.j41(0,"div",0),t.nrm(1,"p",4),t.nI1(2,"translate"),t.k0s()),2&o){const i=t.XpG();t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,i.data.description),t.npT)}}let E=(()=>{class o{constructor(i){this.fb=i}hosted(){}ngOnInit(){this.simpleStringForm=this.fb.group({value:["",this.data.validators]})}getStepSummary(){const i=new Map,c=this.simpleStringForm.value.value;return(0,P.gP)(c)||i.set(this.data.destinationKey,[c]),i}getStepDTO(){const i={},c=this.simpleStringForm.value.value;return i[this.data.destinationKey]=(0,P.gP)(c)?void 0:c,i}canNext(){return this.simpleStringForm.valid}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(h.ze))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-simple-string-step"]],inputs:{data:"data"},decls:4,vars:6,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"],[3,"id","label","help","isLast"],["type","text","name","SimpleStringValue","id","SimpleStringValue","formControlName","value",1,"tw-form-control"],[3,"innerHTML"]],template:function(c,p){1&c&&(t.DNE(0,vt,3,3,"div",0),t.j41(1,"form",1)(2,"app-form-row",2),t.nrm(3,"input",3),t.k0s()()),2&c&&(t.vxM(0,p.data.description?0:-1),t.R7$(),t.Y8G("formGroup",p.simpleStringForm),t.R7$(),t.Y8G("id","simpleStringValue")("label",p.data.label)("help",p.data.help)("isLast",!0))},dependencies:[h.qT,h.me,h.BC,h.cb,h.j4,h.JD,J.Y,T.D9],encapsulation:2})}}return o})();var bt=l(7301),gt=l(1410),N=l(8575);let A=(()=>{class o{constructor(i){this.fb=i}ngOnInit(){this.scopesForm=this.fb.group({})}canNext(){return this.scopesForm.valid}getStepSummary(){const i=new Map;return i.set("allowedScopes",[]),i}getStepDTO(){return{allowedScopes:[]}}hosted(){}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(h.ze))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],inputs:{data:"data"},decls:7,vars:4,consts:[[1,"cms","tw-mb-6"],[3,"formGroup"]],template:function(c,p){1&c&&(t.j41(0,"div",0)(1,"p"),t.EFF(2),t.nI1(3,"translate"),t.k0s()(),t.j41(4,"div",1)(5,"p"),t.EFF(6,"TODO: Not yet implemented"),t.k0s()()),2&c&&(t.R7$(2),t.JRh(t.bMT(3,2,"Clients.Scopes.Select")),t.R7$(2),t.Y8G("formGroup",p.scopesForm))},dependencies:[h.cb,h.j4,T.D9],encapsulation:2})}}return o})();class yt extends it.p{constructor(){super(),this.nameComponentMap.set(w.$.Home,[new f.W(bt.l,gt.y.OpenIddict)]),this.nameComponentMap.set(w.$.SinglePageApplication,[new f.W(D,new x(I.SinglePageApplication)),new f.W(E,new $("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[h.k0.required,h.k0.pattern("^https?://.*$")])),new f.W(E,new $("logoutUrl","Common.LogoutURL","Clients.LogoutURLDescription","Clients.PostLogoutURL",[h.k0.pattern("^https?://.*$")])),new f.W(A,{})]),this.nameComponentMap.set(w.$.LegacySinglePageApplication,[new f.W(D,new x(I.LegacySinglePageApplication)),new f.W(E,new $("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[h.k0.required,h.k0.pattern("^https?://.*$")])),new f.W(E,new $("logoutUrl","Common.LogoutURL","Clients.LogoutURLDescription","Clients.PostLogoutURL",[h.k0.pattern("^https?://.*$")])),new f.W(A,{})]),this.nameComponentMap.set(w.$.PKCEWebApplication,[new f.W(D,new x(I.WebApplicationPKCE)),new f.W(E,new $("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[h.k0.required,h.k0.pattern("^https?://.*$")])),new f.W(E,new $("logoutUrl","Common.LogoutURL","Clients.LogoutURLDescription","Clients.PostLogoutURL",[h.k0.pattern("^https?://.*$")])),new f.W(A,{})]),this.nameComponentMap.set(w.$.PKCENativeApplication,[new f.W(D,new x(I.NativeApplicationPKCE)),new f.W(E,new $("callbackUrl","Common.CallbackURL","Clients.RedirectURLDescription","Clients.CallbackURL",[h.k0.required,h.k0.pattern("^https?://.*$")])),new f.W(E,new $("clientSecret","Common.ClientSecret")),new f.W(A,{})]),this.nameComponentMap.set(w.$.DeviceApplication,[new f.W(D,new x(I.DeviceApplication)),new f.W(A,{})]),this.nameComponentMap.set(w.$.RobotApplication,[new f.W(D,new x(I.RobotApplication)),new f.W(E,new $("clientSecret","Common.ClientSecret")),new f.W(A,{})]),this.nameComponentMap.set(w.$.SamlApplication,[new f.W(D,new x(I.SamlApplication,nt.E.Saml)),new f.W(K.w,{endpointType:"ACSEndpoint"}),new f.W(K.w,{endpointType:"SLOEndpoint"}),new f.W(K.w,{endpointType:"ARSEndpoint"}),new f.W(A,{})]),this.nameTitleMap.set(w.$.Home,new N.J("Clients.Home.Title","")),this.nameTitleMap.set(w.$.SinglePageApplication,new N.J("Clients.SPA.Setup","Clients.SPA.Title")),this.nameTitleMap.set(w.$.LegacySinglePageApplication,new N.J("Clients.LegacySPA.Setup","Clients.LegacySPA.Title")),this.nameTitleMap.set(w.$.DeviceApplication,new N.J("Clients.DeviceFlow.Setup","Clients.DeviceFlow.Title")),this.nameTitleMap.set(w.$.RobotApplication,new N.J("Clients.MachineToMachine.Setup","Clients.MachineToMachine.Title")),this.nameTitleMap.set(w.$.CIBARobotApplication,new N.J("Clients.CIBAMachineToMachine.Setup","Clients.CIBAMachineToMachine.Title")),this.nameTitleMap.set(w.$.NativeApplication,new N.J("Clients.NativeApp.Setup","Clients.NativeApp.Title")),this.nameTitleMap.set(w.$.PKCENativeApplication,new N.J("Clients.NativeApp.Setup","Clients.NativeApp.Title")),this.nameTitleMap.set(w.$.WebApplication,new N.J("Clients.WebApp.Setup","Clients.WebApp.Title")),this.nameTitleMap.set(w.$.PKCEWebApplication,new N.J("Clients.WebApp.Setup","Clients.PKCEWebApp.Title")),this.nameTitleMap.set(w.$.SamlApplication,new N.J("Clients.Saml.Setup","Clients.Saml.Title"))}getWizard(m){return this.nameComponentMap.get(m)}getWizardTitle(m){return this.nameTitleMap.get(m)}}var Tt=l(2420),wt=l(1715);function Rt(o,m){if(1&o&&(t.j41(0,"div",5),t.nrm(1,"div",17),t.k0s()),2&o){const i=t.XpG();t.R7$(),t.xc7("width",i.progressPercent+"%"),t.BMQ("aria-valuenow",i.progressPercent)}}function St(o,m){}function Ft(o,m){if(1&o){const i=t.RV6();t.j41(0,"button",18),t.bIt("click",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.nextTab())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}if(2&o){const i=t.XpG();t.Y8G("disabled",!i.canNext()),t.R7$(),t.JRh(t.bMT(2,2,"Common.Next"))}}function B(o,m){if(1&o){const i=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.submit())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"Common.Save")))}function Ut(o,m){if(1&o){const i=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.previousTab())}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"Common.Back")))}function Mt(o,m){1&o&&(t.j41(0,"a",15),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"StarterMode.UpgradeAdminUI")))}let It=(()=>{class o extends Tt.P{constructor(i,c,p,C){super(c,p,C),this.clientsService=i,this.wizardProvider=new yt,this.wizardName=w.$.Home}submit(){const i=this.getWizardDto(),c={type:I.fromWizardType(this.wizardName),clientId:i.clientId,displayName:i.clientName,callbackUrl:i.callbackUrl,logoutUrl:i.logoutUrl,clientSecret:i.clientSecret,allowedScopes:i.allowedScopes};this.clientsService.create(c).subscribe({complete:()=>{this.finishWizard(),this.clearComponents(),this.toastr.success(this.translate.instant("Common.Created")+": "+i.clientName,this.translate.instant("Notifications.SuccessfullyCreated"))},error:p=>{this.errorService.handleError(p)}})}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(X),t.rXU(O.I),t.rXU(W.tw),t.rXU(T.c$))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-client-wizard-host"]],features:[t.Jv_([X]),t.Vt3],decls:23,vars:15,consts:[[1,"modal-header"],[1,"modal-title",3,"id"],["type","button",1,"modal-close",3,"click"],["aria-hidden","true",1,"fas","fa-times"],[1,"sr-only"],[1,"modal-progress"],[1,"modal-body","scrollbars"],["appStepHost",""],[1,"modal-body-fade"],[1,"modal-footer"],[1,"tw-flex","tw-items-center"],[1,"tw-mr-auto"],["class","tw-btn-success tw-mr-3","id","nextBtn",3,"disabled","click",4,"ngIf"],["class","tw-btn-success tw-mr-3","id","submitBtn",3,"click",4,"ngIf"],["class","tw-btn","id","backBtn",3,"click",4,"ngIf"],["id","upgradeAdminUI","href","starter-mode/teaser",1,"tw-btn","tw-ml-4"],["id","cancelBtn",1,"tw-btn-link","tw--mr-4",3,"click"],["role","progressbar",1,"modal-progress-bar"],["id","nextBtn",1,"tw-btn-success","tw-mr-3",3,"click","disabled"],["id","submitBtn",1,"tw-btn-success","tw-mr-3",3,"click"],["id","backBtn",1,"tw-btn",3,"click"]],template:function(c,p){if(1&c&&(t.j41(0,"div",0)(1,"h5",1),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"button",2),t.bIt("click",function(){return p.hideWizard()}),t.nrm(5,"span",3),t.j41(6,"span",4),t.EFF(7),t.nI1(8,"translate"),t.k0s()()(),t.DNE(9,Rt,2,3,"div",5),t.j41(10,"div",6),t.DNE(11,St,0,0,"ng-template",7),t.k0s(),t.nrm(12,"div",8),t.j41(13,"div",9)(14,"div",10)(15,"div",11),t.DNE(16,Ft,3,4,"button",12)(17,B,3,3,"button",13)(18,Ut,3,3,"button",14)(19,Mt,3,3,"a",15),t.k0s(),t.j41(20,"button",16),t.bIt("click",function(){return p.cancelWizard()}),t.EFF(21),t.nI1(22,"translate"),t.k0s()()()),2&c){let C;t.R7$(),t.Y8G("id",p.titleId),t.R7$(),t.JRh(t.bMT(3,9,null!==(C=null==p.wizardTitles?null:p.wizardTitles.setupTitle)&&void 0!==C?C:"")),t.R7$(5),t.JRh(t.bMT(8,11,"Common.Close")),t.R7$(2),t.vxM(9,p.showProgress?9:-1),t.R7$(7),t.Y8G("ngIf",p.index<(null==p.wizardSteps?null:p.wizardSteps.length)),t.R7$(),t.Y8G("ngIf",p.index==(null==p.wizardSteps?null:p.wizardSteps.length)),t.R7$(),t.Y8G("ngIf",!p.initialStep()),t.R7$(),t.vxM(19,p.initialStep()&&null!=p.asAny&&p.asAny.displayUpgradeIcon?19:-1),t.R7$(2),t.JRh(t.bMT(22,13,"Common.Cancel"))}},dependencies:[d.bT,wt.t,T.D9],encapsulation:2})}}return o})();const Nt=(o,m)=>m.clientId,S=(o,m)=>({"tw-alert":o,"tw-alert-warning":m}),v=o=>({limit:o,type:"client applications",href:"https://www.identityserver.com/products/adminui/order-now?index=2&name=Enterprise"});function jt(o,m){if(1&o){const i=t.RV6();t.j41(0,"app-client-wizard-host",10,0),t.bIt("finish",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.onFinish())})("hide",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.hideWizard())})("wizardCancel",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.hideWizard())}),t.k0s()}if(2&o){const i=t.XpG();t.Y8G("displayUpgradeIcon",i.licenseInfo.isStarterLicense())}}function $t(o,m){if(1&o&&(t.j41(0,"div",11),t.nrm(1,"span",12),t.nI1(2,"translate"),t.k0s()),2&o){const i=t.XpG();t.Y8G("ngClass",t.l_i(5,S,i.limitReached,i.overLimit)),t.R7$(),t.Y8G("innerHTML",t.i5U(2,2,"Common.QuotaLimit",t.eq3(8,v,i.licenseInfo.maxClients)),t.npT)}}function Gt(o,m){1&o&&t.nrm(0,"app-simple-loader")}function Et(o,m){if(1&o&&t.DNE(0,Gt,1,0,"app-simple-loader",13),2&o){const i=t.XpG();t.Y8G("ngIf",i.isLoading)}}function kt(o,m){if(1&o){const i=t.RV6();t.j41(0,"button",24),t.bIt("click",function(){t.eBV(i);const p=t.XpG(2),C=t.sdS(3);return t.Njj(p.showWizard(C))}),t.EFF(1),t.nI1(2,"translate"),t.k0s()}2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"Clients.Add")," "))}function Ht(o,m){1&o&&(t.j41(0,"div",23)(1,"div"),t.EFF(2),t.nI1(3,"translate"),t.k0s()()),2&o&&(t.R7$(2),t.JRh(t.bMT(3,1,"Clients.None")))}function Qt(o,m){1&o&&(t.j41(0,"span",33),t.EFF(1),t.nI1(2,"translate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"Common.Reserved")))}function Vt(o,m){1&o&&(t.nrm(0,"span",35),t.j41(1,"span",8),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&o&&(t.R7$(2),t.JRh(t.bMT(3,1,"Common.View")))}function Lt(o,m){1&o&&(t.nrm(0,"span",36),t.j41(1,"span",8),t.EFF(2),t.nI1(3,"translate"),t.k0s()),2&o&&(t.R7$(2),t.JRh(t.bMT(3,1,"Common.Edit")))}function Dt(o,m){if(1&o){const i=t.RV6();t.j41(0,"tr",31),t.bIt("click",function(){const p=t.eBV(i).$implicit,C=t.XpG(3);return t.Njj(C.navigate(p))}),t.j41(1,"td",32)(2,"b"),t.EFF(3),t.k0s()(),t.j41(4,"td"),t.DNE(5,Qt,3,3,"span",33),t.k0s(),t.j41(6,"td")(7,"button",34),t.DNE(8,Vt,4,3)(9,Lt,4,3),t.k0s()()()}if(2&o){const i=m.$implicit,c=t.XpG(3);t.AVh("inactive",c.isClientReadOnly(i)),t.R7$(2),t.AVh("tw-text-blue-500",!(null!=i&&i.reserved)),t.R7$(),t.SpI(" ",null==i?null:i.displayName," "),t.R7$(2),t.vxM(5,null!=i&&i.reserved?5:-1),t.R7$(3),t.vxM(8,c.isClientReadOnly(i)?8:9)}}function xt(o,m){if(1&o){const i=t.RV6();t.j41(0,"table",25)(1,"thead")(2,"tr")(3,"th",26),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"th",27)(7,"span",8),t.EFF(8),t.nI1(9,"translate"),t.k0s()(),t.j41(10,"th",28)(11,"span",8),t.EFF(12),t.nI1(13,"translate"),t.k0s()()()(),t.j41(14,"tbody"),t.Z7z(15,Dt,10,7,"tr",29,Nt),t.k0s()(),t.j41(17,"app-pager",30),t.bIt("onGoToPage",function(p){t.eBV(i);const C=t.XpG(2);return t.Njj(C.pageStream.next(p))}),t.k0s()}if(2&o){const i=t.XpG(2);t.R7$(4),t.JRh(t.bMT(5,6,"Common.Name")),t.R7$(4),t.JRh(t.bMT(9,8,"Common.Reserved")),t.R7$(4),t.JRh(t.bMT(13,10,"Common.Actions")),t.R7$(3),t.Dyx(i.pagedResult.results),t.R7$(2),t.Y8G("totalResults",null==i.pagedResult?null:i.pagedResult.totalCount)("currentPage",i.page)("lastPage",null==i.pagedResult?null:i.pagedResult.pageCount)}}function At(o,m){if(1&o){const i=t.RV6();t.j41(0,"app-action-bar"),t.qex(1,14),t.j41(2,"div",15)(3,"label",16),t.EFF(4),t.nI1(5,"translate"),t.k0s(),t.j41(6,"select",17),t.mxI("ngModelChange",function(p){t.eBV(i);const C=t.XpG();return t.DH7(C.pageSize,p)||(C.pageSize=p),t.Njj(p)}),t.bIt("change",function(){t.eBV(i);const p=t.XpG();return t.Njj(p.pageSizeStream.next(+p.pageSize))}),t.j41(7,"option",18),t.EFF(8),t.nI1(9,"translate"),t.k0s(),t.j41(10,"option",19),t.EFF(11),t.nI1(12,"translate"),t.k0s(),t.j41(13,"option",20),t.EFF(14),t.nI1(15,"translate"),t.k0s()()(),t.bVm(),t.qex(16,21),t.DNE(17,kt,3,3,"button",22),t.bVm(),t.k0s(),t.DNE(18,Ht,4,3,"div",23)(19,xt,18,12)}if(2&o){const i=t.XpG();t.R7$(4),t.Lme("",i.pageSize," ",t.bMT(5,8,"Nav.PerPage"),""),t.R7$(2),t.R50("ngModel",i.pageSize),t.R7$(2),t.SpI("25 ",t.bMT(9,10,"Nav.PerPage"),""),t.R7$(3),t.SpI("50 ",t.bMT(12,12,"Nav.PerPage"),""),t.R7$(3),t.SpI("100 ",t.bMT(15,14,"Nav.PerPage"),""),t.R7$(3),t.vxM(17,i.isClientsReadOnly?-1:17),t.R7$(),t.vxM(18,(null==i.pagedResult||null==i.pagedResult.results?null:i.pagedResult.results.length)<1?18:19)}}let Bt=(()=>{class o extends _.if{constructor(i,c,p,C,g,k,Ot,Jt){super(i,c,!0),this.errorService=p,this.titleService=C,this.modalService=g,this.clientService=k,this.licenseService=Ot,this.securityService=Jt,this.pageSize=25,this.page=1,this.term="",this.pageStream=new z.B,this.pageSizeStream=new z.B,this.mapSearchTerm=this.mapSearchTerm.bind(this)}ngOnInit(){const i=this.translate.instant("Nav.Clients")+" - "+rt.$9.SITE_TITLE;this.titleService.setTitle(i);const c=this.pageStream.pipe((0,e.T)(g=>({searchTerm:this.term,page:g,pageSize:this.pageSize}))),p=this.pageSizeStream.pipe((0,e.T)(g=>({searchTerm:this.term,page:this.page,pageSize:g}))),C=c.pipe((0,F.X)(p),(0,F.X)(this.searchSource),(0,F.X)(this.enterKeySource),(0,j.Z)({searchTerm:this.term,page:this.page,pageSize:this.pageSize}),(0,M.Z)(g=>(this.isLoading=!0,this.page=g.page,this.pageSize=g.pageSize,this.clientService.find(g.searchTerm,g.page,g.pageSize).pipe((0,Q.c)(200)))));this.subscriptions=[C.subscribe({next:g=>{this.pagedResult=g,this.isLoading=!1},error:g=>{this.errorService.handleError(g),this.isLoading=!1}}),this.licenseService.getLicenseInfo().subscribe({next:g=>{this.licenseInfo=g}})]}ngOnDestroy(){this.subscriptions?.forEach(i=>{i.unsubscribe()})}mapSearchTerm(i){return this.term=i,{searchTerm:i,page:1,pageSize:this.pageSize}}reload(){this.pageStream.next(this.page),this.pageSizeStream.next(this.pageSize)}onFinish(){this.hideWizard(),this.reload()}showWizard(i){this.modalService.show(i,{id:G.R.Id,ariaLabelledBy:G.R.TileId,ariaDescribedby:G.R.DescriptionId,backdrop:"static"})}hideWizard(){this.modalService.hide(G.R.Id)}get isClientsReadOnly(){return(0,P.ci)(this.securityService.userPermissions)}isClientReadOnly(i){const c=ct.I.RestrictedClientTypes.includes(i.type)&&this.licenseInfo.isStarterLicense();return i.reserved||this.licenseInfo.overClientLimit||c}navigate(i){this.toastr.error("Not Yet Implemented!")}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(W.tw),t.rXU(T.c$),t.rXU(O.I),t.rXU(pt.hE),t.rXU(dt.I8),t.rXU(X),t.rXU(ht.X),t.rXU(Ct.i))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-list-clients"]],features:[t.Vt3],decls:17,vars:12,consts:[["addClientModal",""],[3,"title"],["id","clientsList",1,"tw-container","tw-mx-auto"],["id","quotaLimitAlert","role","alert","class","tw-mb-4",3,"ngClass",4,"ngIf"],["id","searchContainer",1,"tw-mb-2"],[1,"tw-flex","tw-bg-white","tw-border","tw-border-grey-300","tw-opacity-75","tw-cursor-text","tw-rounded","focus-within:tw-opacity-100","focus-within:tw-border-blue-400","tw-transition-all","tw-ease-in-out"],["for","searchTerm",1,"tw-flex","tw-items-center","tw-text-grey-500","tw-m-0","tw-ml-3"],["aria-hidden","true",1,"far","fa-search","tw-text-sm"],[1,"sr-only"],["id","searchTerm","type","search",1,"tw-bg-transparent","tw-border-0","tw-text-base","tw-leading-tight","tw-px-2","tw-py-2","tw-w-full","focus:tw-outline-none","tw-transition-all","tw-ease-in-out",3,"ngModelChange","keyup","ngModel","placeholder"],[3,"finish","hide","wizardCancel","displayUpgradeIcon"],["id","quotaLimitAlert","role","alert",1,"tw-mb-4",3,"ngClass"],[3,"innerHTML"],[4,"ngIf"],["left",""],[1,"tw-hidden","tw-form-select","tw-w-auto","sm:tw-block"],["for","pageSizeToggle",1,"sr-only"],["id","pageSizeToggle",1,"tw-form-control","tw-form-control-small",3,"ngModelChange","change","ngModel"],["value","25"],["value","50"],["value","100"],["right",""],["id","addClientBtn",1,"tw-btn-success"],["id","clientsNone","role","alert",1,"tw-alert"],["id","addClientBtn",1,"tw-btn-success",3,"click"],["id","clientsTable",1,"datatable","selectable","hover"],[1,"lg:tw-w-1/3"],[1,"tw-hidden","lg:tw-table-cell"],[1,"tw-w-1"],[1,"group","clientRow",3,"inactive"],[3,"onGoToPage","totalResults","currentPage","lastPage"],[1,"group","clientRow",3,"click"],[1,"tw-max-w-0","tw-truncate"],[1,"tw-pill"],["type","button",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500"],["id","viewOrEditIcon","aria-hidden","true",1,"fas","fa-eye"],["id","viewOrEditIcon","aria-hidden","true",1,"fad","fa-pencil"]],template:function(c,p){if(1&c){const C=t.RV6();t.nrm(0,"app-title-bar",1),t.nI1(1,"translate"),t.DNE(2,jt,2,1,"ng-template",null,0,t.C5r),t.j41(4,"div",2),t.DNE(5,$t,3,10,"div",3),t.j41(6,"div",4)(7,"div",5)(8,"label",6),t.nrm(9,"span",7),t.j41(10,"span",8),t.EFF(11),t.nI1(12,"translate"),t.k0s()(),t.j41(13,"input",9),t.nI1(14,"translate"),t.mxI("ngModelChange",function(k){return t.eBV(C),t.DH7(p.searchTerm,k)||(p.searchTerm=k),t.Njj(k)}),t.bIt("keyup",function(k){return t.eBV(C),t.Njj(p.search(k))}),t.k0s()()(),t.DNE(15,Et,1,1,"app-simple-loader")(16,At,20,16),t.k0s()}2&c&&(t.Y8G("title",t.bMT(1,6,"Nav.Clients")),t.R7$(5),t.Y8G("ngIf",p.limitReached),t.R7$(6),t.JRh(t.bMT(12,8,"Common.Search")),t.R7$(2),t.FS9("placeholder",t.bMT(14,10,"Clients.SearchPlaceholder")),t.R50("ngModel",p.searchTerm),t.R7$(2),t.vxM(15,p.isLoading?15:16))},dependencies:[d.YU,d.bT,h.xH,h.y7,h.me,h.wz,h.BC,h.vS,L.z,q.n,ft.d,tt.B,It,T.D9],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]})}}return o})();var st=l(3583),H=l(6719),at=l(251),Yt=l(6406),zt=l(6728),ot=l(7778);const lt=(o,m)=>({title:o,link:m}),Pt=o=>[o];let Xt=(()=>{class o{constructor(i,c,p,C,g,k,Ot,Jt){this.clientService=i,this.clientCache=c,this.localize=p,this.route=C,this.translate=g,this.router=k,this.toastr=Ot,this.errorService=Jt}get saveDisabled(){const i=Array.from(this.clientCache.componentDirtyValidMap.values());return this.clientCache.componentDirtyValidMap.size<1||i.includes(!1)}ngOnInit(){this.clientCache.unsavedCache.next(this.route.snapshot.data.client),this.subscriptions=[this.clientCache.unsavedCache$.subscribe({next:i=>{this.currentClient=i}})]}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}saveClient(){this.clientService.update(this.currentClient.clientId,this.currentClient).subscribe({next:i=>{const c=this.translate.instant("Notifications.Saving Success Title"),p=this.translate.instant("Clients.UpdatedClient");this.clientCache.componentDirtyValidMap.clear(),this.toastr.success(p,c)},error:i=>{const c={toastBody:this.translate.instant("Notifications.Saving Error Title"),toastTitle:this.translate.instant("Notifications.Saving Client Message")};this.errorService.handleError(i,c)}})}cloneClient(){this.toastr.error("Not Yet Implemented!")}deleteClient(){this.clientService.delete(this.currentClient.clientId).subscribe({next:i=>{const c=this.localize.translateRoute("/applications/clients");this.router.navigate([c]);const p=this.translate.instant("Clients.Deleted"),C=`${this.currentClient.displayName} ${this.translate.instant("Common.Delete.Deleted")}`;this.toastr.success(C,p)},error:i=>{const c={toastBody:this.translate.instant("Notifications.Delete Error Title"),toastTitle:this.translate.instant("Notifications.Delete Client Message")};this.errorService.handleError(i,c)}})}get canDeactivate(){return()=>this.saveDisabled}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(X),t.rXU(st.t),t.rXU(V.QG),t.rXU(R.nX),t.rXU(T.c$),t.rXU(R.Ix),t.rXU(W.tw),t.rXU(O.I))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-edit-client"]],decls:30,vars:38,consts:[["deleteClientModal",""],[3,"title","crumbs","hasTabs"],["tabs",""],[3,"tabTitle","tabValue"],["id","editClient",1,"tw-container","tw-mx-auto"],["id","submitBtn",1,"tw-btn-success","tw-mr-3","tw-mb-3",3,"click","disabled"],["id","cloneBtn","type","button",1,"tw-hidden","tw-btn","tw-mr-3","tw-mb-3","xs:tw-inline-flex",3,"click","disabled"],["right",""],["id","deleteBtn","type","button","data-toggle","modal",1,"tw-btn-danger","tw-mb-3",3,"click"],[3,"delete","resourceName"]],template:function(c,p){if(1&c){const C=t.RV6();t.j41(0,"app-title-bar",1),t.nI1(1,"translate"),t.nI1(2,"localize"),t.qex(3,2),t.j41(4,"app-custom-tabs"),t.nrm(5,"app-custom-tab",3)(6,"app-custom-tab",3)(7,"app-custom-tab",3)(8,"app-custom-tab",3)(9,"app-custom-tab",3)(10,"app-custom-tab",3)(11,"app-custom-tab",3),t.k0s(),t.bVm(),t.k0s(),t.j41(12,"div",4),t.nrm(13,"router-outlet"),t.k0s(),t.j41(14,"app-button-bar")(15,"button",5),t.bIt("click",function(){return t.eBV(C),t.Njj(p.saveClient())}),t.j41(16,"span"),t.EFF(17),t.nI1(18,"translate"),t.k0s()(),t.j41(19,"button",6),t.bIt("click",function(){return t.eBV(C),t.Njj(p.cloneClient())}),t.j41(20,"span"),t.EFF(21),t.nI1(22,"translate"),t.k0s()(),t.qex(23,7),t.j41(24,"button",8),t.bIt("click",function(){t.eBV(C);const k=t.sdS(28);return t.Njj(k.show())}),t.EFF(25),t.nI1(26,"translate"),t.k0s(),t.bVm(),t.k0s(),t.j41(27,"app-delete-confirmation-modal",9,0),t.bIt("delete",function(){return t.eBV(C),t.Njj(p.deleteClient())}),t.k0s(),t.nrm(29,"app-can-deactivate")}2&c&&(t.Y8G("title",p.currentClient.displayName)("crumbs",t.eq3(36,Pt,t.l_i(33,lt,t.bMT(1,23,"Nav.Clients"),t.bMT(2,25,"/applications/clients"))))("hasTabs",!0),t.R7$(5),t.Y8G("tabTitle","Nav.Details")("tabValue","details"),t.R7$(),t.Y8G("tabTitle","Nav.Security")("tabValue","security"),t.R7$(),t.Y8G("tabTitle","Nav.ApplicationUrls")("tabValue","applicationUrls"),t.R7$(),t.Y8G("tabTitle","Nav.TokenRequest")("tabValue","tokenRequest"),t.R7$(),t.Y8G("tabTitle","Nav.AllowedScopes")("tabValue","allowedScopes"),t.R7$(),t.Y8G("tabTitle","Nav.Claims")("tabValue","claims"),t.R7$(),t.Y8G("tabTitle","Nav.Advanced")("tabValue","advanced"),t.R7$(4),t.Y8G("disabled",p.saveDisabled),t.R7$(2),t.JRh(t.bMT(18,27,"Common.SaveAll")),t.R7$(2),t.Y8G("disabled",!0),t.R7$(2),t.JRh(t.bMT(22,29,"Clients.Clone.Label")),t.R7$(4),t.SpI(" ",t.bMT(26,31,"Common.Delete.Title")," "),t.R7$(2),t.Y8G("resourceName",p.currentClient.displayName))},dependencies:[L.z,H.G,at.v,Yt.z,zt.E,ot.w,R.n3,V.tl,T.D9],encapsulation:2})}}return o})();const _t=(o,m)=>({title:o,link:m}),Wt=o=>[o];let s=(()=>{class o{constructor(i){this.route=i}ngOnInit(){this.client=this.route.snapshot.data.client}static{this.\u0275fac=function(c){return new(c||o)(t.rXU(R.nX))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["ng-component"]],decls:8,vars:14,consts:[[3,"title","crumbs","hasTabs"],["tabs",""],[3,"tabTitle","tabValue"],["id","viewClient",1,"tw-container","tw-mx-auto"]],template:function(c,p){1&c&&(t.j41(0,"app-title-bar",0),t.nI1(1,"translate"),t.nI1(2,"localize"),t.qex(3,1),t.j41(4,"app-custom-tabs"),t.nrm(5,"app-custom-tab",2),t.k0s(),t.bVm(),t.k0s(),t.j41(6,"div",3),t.nrm(7,"router-outlet"),t.k0s()),2&c&&(t.Y8G("title",p.client.displayName)("crumbs",t.eq3(12,Wt,t.l_i(9,_t,t.bMT(1,5,"Nav.Clients"),t.bMT(2,7,"/applications/clients"))))("hasTabs",!0),t.R7$(5),t.Y8G("tabTitle","Nav.Details")("tabValue","details"))},dependencies:[L.z,H.G,at.v,R.n3,V.tl,T.D9],styles:["[_nghost-%COMP%]{width:100%;display:block;position:relative}"]})}}return o})(),b=(()=>{class o{constructor(i,c){this.clientService=i,this.errorService=c}resolve(i,c){return this.clientService.getByResourceId(i.params.id)}static{this.\u0275fac=function(c){return new(c||o)(t.KVO(X),t.KVO(O.I))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}}return o})();var n=l(3178),a=l(2892),r=l(4446),u=l(9962),y=l(8416);const U=[{path:"clients",component:Bt,canActivate:[a.h,r._],data:{permissions:[n.a[n.a.IdentityServerManager],n.a[n.a.IdentityServerManagerReadOnly],n.a[n.a.AllReadOnly],n.a[n.a.All]]}},{path:"clients/:id",component:Xt,loadChildren:()=>Promise.resolve().then(l.bind(l,5829)).then(o=>o.EditClientModule),resolve:{client:b},canActivate:[a.h,r._,u.m],canDeactivate:[y.M],data:{permissions:[n.a[n.a.IdentityServerManager],n.a[n.a.All]]}},{path:"clients/view/:id",component:s,loadChildren:()=>Promise.resolve().then(l.bind(l,9114)).then(o=>o.ViewClientModule),resolve:{client:b},canActivate:[a.h,r._],data:{permissions:[n.a[n.a.IdentityServerManager],n.a[n.a.IdentityServerManagerReadOnly],n.a[n.a.AllReadOnly],n.a[n.a.All]]}}];let Zt=(()=>{class o{static{this.\u0275fac=function(c){return new(c||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[R.iI.forChild(U),V.XE.forChild(U),R.iI]})}}return o})();var qt=l(367),te=l(275),ee=l(1993),ne=l(8455),ie=l(9947),se=l(4193),ae=l(7175),oe=l(5731),le=l(8389),re=l(1683),ce=l(5829),pe=l(9114);let de=(()=>{class o{static{this.\u0275fac=function(c){return new(c||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({providers:[b],imports:[d.MD,h.YN,h.X1,le.w,Zt,qt.m,T.h,te.W,ee.E,ne.p,V.XE,ie.a,se.c,ae.c,oe.i,re.Y,ce.EditClientModule,pe.ViewClientModule]})}}return o})()},5829:(Kt,Y,l)=>{l.r(Y),l.d(Y,{EditClientModule:()=>Wt});var T=l(177),V=l(7005),d=l(9417),h=l(1583),R=l(1780),z=l(6303),e=l(4438),F=l(3583),j=l(8698),M=l(803),Q=l(8762),_=l(7970),G=l(4692);const rt=s=>[s],ct=()=>["Web","Native"];function P(s,b){if(1&s){const n=e.RV6();e.j41(0,"div",1)(1,"app-form-row",2),e.nrm(2,"app-readonly",3),e.nI1(3,"readOnlyValue"),e.k0s(),e.j41(4,"app-form-row",2),e.nrm(5,"input",4),e.k0s(),e.j41(6,"app-form-row",5)(7,"app-row-bar",6)(8,"app-state-toggle",7),e.bIt("newValue",function(r){e.eBV(n);const u=e.XpG();return u.detailsForm.patchValue({applicationType:r}),e.Njj(u.detailsForm.markAsDirty())}),e.k0s()()()()}if(2&s){const n=e.XpG();e.Y8G("formGroup",n.detailsForm),e.R7$(),e.Y8G("id","clientId")("label","Clients.ID")("help","Clients.IDHelp"),e.R7$(),e.Y8G("fieldType",n.ReadOnlyFieldType.Single)("values",e.eq3(17,rt,e.bMT(3,15,n.client.clientId))),e.R7$(2),e.Y8G("id","displayName")("label","Common.DisplayName")("help","Clients.DisplayNameHelp"),e.R7$(2),e.Y8G("id","applicationType")("label","Clients.ApplicationType")("isLast",!0),e.R7$(2),e.Y8G("id","applicationType")("options",e.lJ4(19,ct))("value",n.detailsForm.controls.applicationType.value)}}let t=(()=>{class s{get ReadOnlyFieldType(){return z.t}constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangesSub?.unsubscribe()}intialiseForm(){this.detailsForm=this.fb.group({displayName:[this.client.displayName,[]],displayNames:[this.client.displayNames,[]],applicationType:[this.client.applicationType,[]]}),this.valueChangesSub=this.detailsForm.valueChanges.subscribe({next:n=>{const a={...this.client,displayName:this.detailsForm.get("displayName").value,applicationType:this.detailsForm.get("applicationType").value};this.clientCache.componentDirtyValidMap.set("detailsForm",this.detailsForm.dirty&&this.detailsForm.valid),this.clientCache.unsavedCache.next(a)}})}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-client-details"]],decls:1,vars:1,consts:[["id","editClientDetails",3,"formGroup",4,"ngIf"],["id","editClientDetails",3,"formGroup"],[3,"id","label","help"],[1,"tw-h-full",3,"fieldType","values"],["type","text","name","DisplayName","id","displayName","formControlName","displayName",1,"tw-form-control"],[3,"id","label","isLast"],[1,"tw-form-input"],["left","",3,"newValue","id","options","value"]],template:function(a,r){1&a&&e.DNE(0,P,9,20,"div",0),2&a&&e.Y8G("ngIf",r.detailsForm)},dependencies:[T.bT,d.me,d.BC,d.cb,d.j4,d.JD,j.Y,M.f,Q.O,_.j,G.u],encapsulation:2})}}return s})();var W=l(7263),O=l(8114);const pt=s=>[s];function dt(s,b){1&s&&(e.nrm(0,"span",11),e.j41(1,"span",12),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"Common.Add")))}function Z(s,b){1&s&&(e.nrm(0,"span",13),e.j41(1,"span",12),e.EFF(2),e.nI1(3,"translate"),e.k0s()),2&s&&(e.R7$(2),e.JRh(e.bMT(3,1,"Common.Edit")))}let ut=(()=>{class s{get ReadOnlyFieldType(){return z.t}get currentValue(){const n=this.updateSecretForm.get("newSecret").value;return(0,W.gP)(n)?null:n}constructor(n){this.fb=n,this.update=new e.bkB,this.updateSecretForm=n.group({newSecret:["",[]]})}confirm(){this.update.emit(this.currentValue),this.updateSecretForm.patchValue({newSecret:null})}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-secret-input"]],inputs:{id:"id",label:"label",help:"help",isLast:"isLast",secret:"secret"},outputs:{update:"update"},decls:16,vars:20,consts:[["addClientSecretButton",""],["modifySecretModal",""],[3,"id","label","help","isLast"],[1,"tw-flex","tw-w-full","lg:tw-max-w-2xl"],[3,"fieldType","values"],["type","button","placement","right",1,"tw-btn-link","tw-btn-small","group-hover:tw-text-blue-500",3,"click","id"],[3,"confirm","close","title","modalId","okText","inFlight"],["body",""],[3,"formGroup"],[1,"tw-mb-4"],["type","text","name","newSecret","id","newSecret","formControlName","newSecret",1,"tw-form-control"],["id","addEditIcon","aria-hidden","true",1,"fas","fa-plus"],[1,"sr-only"],["id","addEditIcon","aria-hidden","true",1,"fad","fa-pencil"]],template:function(a,r){if(1&a){const u=e.RV6();e.j41(0,"app-form-row",2)(1,"div",3),e.nrm(2,"app-readonly",4),e.nI1(3,"readOnlyValue"),e.j41(4,"button",5,0),e.bIt("click",function(){e.eBV(u);const U=e.sdS(9);return e.Njj(U.show())}),e.DNE(6,dt,4,3)(7,Z,4,3),e.k0s()()(),e.j41(8,"app-confirmation-modal",6,1),e.bIt("confirm",function(){return e.eBV(u),e.Njj(r.confirm())})("close",function(){return e.eBV(u),e.Njj(r.updateSecretForm.patchValue({newSecret:null}))}),e.qex(10,7),e.j41(11,"form",8)(12,"p",9),e.EFF(13),e.nI1(14,"translate"),e.k0s(),e.nrm(15,"input",10),e.k0s(),e.bVm(),e.k0s()}2&a&&(e.Y8G("id",r.id+"secret-value-input")("label",r.label)("help",r.help)("isLast",r.isLast),e.R7$(2),e.Y8G("fieldType",r.ReadOnlyFieldType.Single)("values",e.eq3(18,pt,e.bMT(3,14,r.secret))),e.R7$(2),e.Y8G("id",r.id+"-secret-value-change-btn"),e.R7$(2),e.vxM(6,null===r.secret?6:7),e.R7$(2),e.Y8G("title","Common.NewSecretModal.Title")("modalId",r.id+"-modify-secret")("okText","Common.Update")("inFlight",!r.updateSecretForm.valid),e.R7$(3),e.Y8G("formGroup",r.updateSecretForm),e.R7$(2),e.SpI("",e.bMT(14,16,"Common.NewSecretModal.Description"),":"))},dependencies:[d.qT,d.me,d.BC,d.cb,d.j4,d.JD,O.B,Q.O,j.Y,R.D9,G.u],encapsulation:2})}}return s})();const mt=()=>["Public","Confidential"],X=()=>["Systematic","Explicit","External","Implicit"];function ht(s,b){if(1&s){const n=e.RV6();e.j41(0,"div",1)(1,"app-form-row",2)(2,"app-row-bar",3)(3,"app-state-toggle",4),e.bIt("newValue",function(r){e.eBV(n);const u=e.XpG();return u.securityForm.patchValue({clientType:r}),e.Njj(u.securityForm.markAsDirty())}),e.k0s()()(),e.j41(4,"app-secret-input",5),e.bIt("update",function(r){e.eBV(n);const u=e.XpG();return e.Njj(u.updateSecret(r))}),e.k0s(),e.j41(5,"app-form-row",6)(6,"app-row-bar",3)(7,"app-state-toggle",4),e.bIt("newValue",function(r){e.eBV(n);const u=e.XpG();return u.securityForm.patchValue({consentType:r}),e.Njj(u.securityForm.markAsDirty())}),e.k0s()()()()}if(2&s){const n=e.XpG();e.Y8G("formGroup",n.securityForm),e.R7$(),e.Y8G("id","clientType")("label","Clients.ClientType.Label")("help","Clients.ClientType.Help"),e.R7$(2),e.Y8G("id","clientType")("options",e.lJ4(18,mt))("value",n.securityForm.get("clientType").value),e.R7$(),e.Y8G("id","client")("label","DynamicAuth.ClientSecret.Label")("help","DynamicAuth.ClientSecret.Help")("secret",n.securityForm.get("clientSecret").value),e.R7$(),e.Y8G("id","consentType")("label","Clients.ConsentType.Label")("help","Clients.ConsentType.Help")("isLast",!0),e.R7$(2),e.Y8G("id","consentType")("options",e.lJ4(19,X))("value",n.securityForm.get("consentType").value)}}let Ct=(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangeSub?.unsubscribe()}intialiseForm(){this.securityForm=this.fb.group({clientType:[this.client.clientType,[]],clientSecret:[this.client.clientSecret,[]],consentType:[this.client.consentType,[]]}),this.valueChangeSub=this.securityForm.valueChanges.subscribe({next:n=>{const a={...this.client,clientType:n.clientType,clientSecret:n.clientSecret,consentType:n.consentType};this.clientCache.componentDirtyValidMap.set("securityForm",this.securityForm.valid&&this.securityForm.dirty),this.clientCache.unsavedCache.next(a)}})}updateSecret(n){this.securityForm.markAsDirty(),this.securityForm.patchValue({clientSecret:n})}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-client-security"]],decls:1,vars:1,consts:[["id","editClientSecurity",3,"formGroup",4,"ngIf"],["id","editClientSecurity",3,"formGroup"],[3,"id","label","help"],[1,"tw-form-input"],["left","",3,"newValue","id","options","value"],[3,"update","id","label","help","secret"],[3,"id","label","help","isLast"]],template:function(a,r){1&a&&e.DNE(0,ht,8,20,"div",0),2&a&&e.Y8G("ngIf",r.securityForm)},dependencies:[T.bT,d.cb,d.j4,j.Y,M.f,ut,_.j],encapsulation:2})}}return s})();var L=l(4252),q=l(1258);class ft{static propNames(b){return n=>{const a=b.map(r=>n.value[r]);return a.includes(r=>"boolean"!=typeof r)?{invalidTypeProvided:`one of '${b}' is not a boolean`}:a.includes(!0)?null:{noPropertyTrue:`one of '${b}' must be set to true`}}}}var tt=l(4754),$=l(5794),I=l(3899),J=l(9550),et=l(7294),D=l(8577);const nt=["addButton"];function x(s,b){if(1&s&&(e.j41(0,"div",9)(1,"app-form-row",10),e.nrm(2,"input",11),e.k0s(),e.j41(3,"app-form-row",12)(4,"app-form-toggle",13),e.nrm(5,"input",14),e.k0s()(),e.j41(6,"app-form-row",15)(7,"app-form-toggle",13),e.nrm(8,"input",16),e.k0s()()()),2&s){const n=e.XpG();e.Y8G("formGroup",n.addUpdateForm),e.R7$(),e.Y8G("id","addUrl")("label","Common.URL"),e.R7$(2),e.Y8G("id","addRedirectUri")("label","Common.Callback")("help","Clients.URLS.SendTokens"),e.R7$(),e.Y8G("id","addRedirectUri"),e.R7$(2),e.Y8G("id","addPostLogoutRedirectUri")("label","Common.Signout")("help","Clients.URLS.RedirectAfterLogout")("isLast",!0),e.R7$(),e.Y8G("id","addPostLogoutRedirectUri")}}let w=(()=>{class s{constructor(n,a,r,u,y){this.clientCache=n,this.modalService=a,this.fb=r,this.toastr=u,this.translate=y,this.tableActions=[L.AA.Select,L.AA.Delete],this.tableRedirectProp="isRedirect",this.tableLogoutProp="isLogout",this.modalActions=[q.N.Save],this.currentUrls=[],this.intialiseForm()}ngOnInit(){this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n;const a=n.redirectUris.concat(n.postLogoutRedirectUris);this.currentUrls=a.filter((r,u)=>a.indexOf(r)===u).map(r=>({url:r,isRedirect:n.redirectUris.includes(r),isLogout:n.postLogoutRedirectUris.includes(r)})).sort((r,u)=>r.url>u.url?1:-1)}})}intialiseForm(){this.addUpdateForm=this.fb.group({url:["",[d.k0.required]],isRedirect:[!0,[]],isLogout:[!1,[]]},{validators:[ft.propNames(["isRedirect","isLogout"])]})}openAddModal(){this.isNew=!0,this.addUpdateForm.patchValue({url:"",isRedirect:!0,isLogout:!1}),this.modalService.showById("addUpdateModal",this.addButtonRef)}openModalForEdit(n){this.isNew=!1,this.addUpdateForm.patchValue(n.data),this.modalService.showById("addUpdateModal",this.addButtonRef)}closeModal(){this.modalService.hideById("addUpdateModal")}addOrUpdateUrl(){const n=this.addUpdateForm.value.url,a=this.currentUrls.findIndex(r=>r.url===n);if(a>=0){if(this.isNew){const r=this.translate.instant("Clients.URLS.AlreadyExistsWarn.Title"),u=this.translate.instant("Clients.URLS.AlreadyExistsWarn.Message",{url:n});this.toastr.warning(u,r)}this.currentUrls[a]=this.addUpdateForm.value}else this.currentUrls.push(this.addUpdateForm.value);this.updateCache()}deleteUrl(n){this.currentUrls.splice(n,1),this.updateCache()}updateCache(){const n={...this.client,redirectUris:this.currentUrls.filter(a=>a.isRedirect).map(a=>a.url),postLogoutRedirectUris:this.currentUrls.filter(a=>a.isLogout).map(a=>a.url)};this.clientCache.componentDirtyValidMap.set("editAppUrls",!0),this.clientCache.unsavedCache.next(n)}get addOrUpdateDisabled(){return!this.addUpdateForm.dirty||!this.addUpdateForm.valid}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(tt.B),e.rXU(d.ze),e.rXU($.tw),e.rXU(R.c$))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-app-urls"]],viewQuery:function(a,r){if(1&a&&e.GBs(nt,5),2&a){let u;e.mGM(u=e.lsd())&&(r.addButtonRef=u.first)}},decls:13,vars:27,consts:[["addButton",""],["id","editAppUrls"],["right",""],[1,"tw-btn-success",3,"click","id"],["id","appUrls",3,"onSelect","delete","rows","actions","norowslabel"],[3,"title","headClasses","cellClasses","prop"],[3,"title","headClasses","cellClasses","prop","isBoolean"],[3,"onSave","onCancel","title","actions","modalId","addDisabled","saveText"],["id","addUpdateUrl",3,"formGroup",4,"ngIf"],["id","addUpdateUrl",3,"formGroup"],[3,"id","label"],["id","addUrl","type","url","name","addUrl","formControlName","url",1,"tw-form-control"],[3,"id","label","help"],[3,"id"],["id","addRedirectUri","type","checkbox","name","addRedirectUri","formControlName","isRedirect",1,"tw-form-switch__input"],[3,"id","label","help","isLast"],["id","addPostLogoutRedirectUri","type","checkbox","name","addPostLogoutRedirectUri","formControlName","isLogout",1,"tw-form-switch__input"]],template:function(a,r){if(1&a){const u=e.RV6();e.j41(0,"div",1)(1,"app-action-bar"),e.qex(2,2),e.j41(3,"button",3,0),e.bIt("click",function(){return e.eBV(u),e.Njj(r.openAddModal())}),e.EFF(5),e.nI1(6,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(7,"app-data-table",4),e.bIt("onSelect",function(U){return e.eBV(u),e.Njj(r.openModalForEdit(U))})("delete",function(U){return e.eBV(u),e.Njj(r.deleteUrl(U))}),e.nrm(8,"app-data-table-column",5)(9,"app-data-table-column",6)(10,"app-data-table-column",6),e.k0s()(),e.j41(11,"app-custom-modal",7),e.bIt("onSave",function(){return e.eBV(u),e.Njj(r.addOrUpdateUrl())})("onCancel",function(){return e.eBV(u),e.Njj(r.closeModal())}),e.DNE(12,x,9,12,"div",8),e.k0s()}2&a&&(e.R7$(3),e.Y8G("id","addUrlButton"),e.R7$(2),e.SpI(" ",e.bMT(6,25,"Clients.URLS.AddURL")," "),e.R7$(2),e.Y8G("rows",r.currentUrls)("actions",r.tableActions)("norowslabel","Clients.URLS.None"),e.R7$(),e.Y8G("title","Common.URL")("headClasses","tw-w-1/2")("cellClasses","tw-max-w-0 tw-truncate")("prop","url"),e.R7$(),e.Y8G("title","Common.Callback")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop",r.tableRedirectProp)("isBoolean",!0),e.R7$(),e.Y8G("title","Common.Signout")("headClasses","tw-text-center")("cellClasses","tw-text-center")("prop",r.tableLogoutProp)("isBoolean",!0),e.R7$(),e.Y8G("title",r.isNew?"Clients.URLS.AddURL":"Clients.URLS.EditURL")("actions",r.modalActions)("modalId","addUpdateModal")("addDisabled",r.addOrUpdateDisabled)("saveText",r.isNew?"Common.Add":"Common.Update"),e.R7$(),e.Y8G("ngIf",r.addUpdateForm))},dependencies:[T.bT,I.G,d.me,d.Zm,d.BC,d.cb,d.j4,d.JD,j.Y,J.m,et.n,L.up,D.w,R.D9],encapsulation:2})}}return s})();var it=function(s){return s.AuthorizationCode="authorization_code",s.ClientCredentials="client_credentials",s.DeviceCode="urn:ietf:params:oauth:grant-type:device_code",s.Implicit="implicit",s.Password="password",s.RefreshToken="refresh_token",s}(it||{}),f=function(s){return s.None="none",s.Code="code",s.IdToken="id_token",s.Token="token",s}(f||{}),K=l(2891);function vt(s,b){if(1&s&&(e.j41(0,"div",1)(1,"app-form-row",2)(2,"app-form-toggle",3),e.nrm(3,"input",4),e.k0s()(),e.j41(4,"app-form-row",5),e.nrm(5,"app-freetext-list-input",6),e.k0s(),e.j41(6,"app-form-row",7),e.nrm(7,"app-freetext-list-input",8),e.k0s()()),2&s){const n=e.XpG();e.Y8G("formGroup",n.tokenRequestFrom),e.R7$(),e.Y8G("id","RequirePKCE")("label","Clients.RequirePkce")("help","Clients.RequirePkceHelp"),e.R7$(),e.Y8G("id","RequirePKCE")("isTraffic",!0)("isAlt",!1),e.R7$(3),e.Y8G("suggestions",n.grantTypeOptions),e.R7$(),e.Y8G("isLast",!0),e.R7$(),e.Y8G("suggestions",n.responseTypeOptions)}}let E=(()=>{class s{get grantTypeOptions(){return Object.values(it)}get responseTypeOptions(){return Object.values(f)}constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangeSub?.unsubscribe()}intialiseForm(){this.tokenRequestFrom=this.fb.group({requirePKCE:[this.client.requirePKCE,[]],grantTypes:[this.client.grantTypes,[]],responseTypes:[this.client.responseTypes,[]]}),this.valueChangeSub=this.tokenRequestFrom.valueChanges.subscribe({next:n=>{const a={...this.client,requirePKCE:this.tokenRequestFrom.value.requirePKCE,grantTypes:this.tokenRequestFrom.value.grantTypes,responseTypes:this.tokenRequestFrom.value.responseTypes};this.clientCache.componentDirtyValidMap.set("tokenRequestFrom",this.tokenRequestFrom.dirty&&this.tokenRequestFrom.valid),this.clientCache.unsavedCache.next(a)}})}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-token-request"]],decls:1,vars:1,consts:[["id","editClientTokenRequest",3,"formGroup",4,"ngIf"],["id","editClientTokenRequest",3,"formGroup"],[3,"id","label","help"],[3,"id","isTraffic","isAlt"],["id","RequirePKCE","formControlName","requirePKCE","type","checkbox",1,"tw-form-switch__input"],["id","GrantType","label","Clients.GrantTypes.Label","help","Clients.GrantTypes.Help"],["id","GrantType","formControlName","grantTypes",3,"suggestions"],["id","ResponseType","label","Clients.ResponseType","help","Clients.ResponseTypeHelp",3,"isLast"],["id","ResponseType","formControlName","responseTypes",3,"suggestions"]],template:function(a,r){1&a&&e.DNE(0,vt,8,10,"div",0),2&a&&e.Y8G("ngIf",r.tokenRequestFrom)},dependencies:[T.bT,d.Zm,d.BC,d.cb,d.j4,d.JD,j.Y,J.m,K.t],encapsulation:2})}}return s})();var bt=l(1594);function gt(s,b){if(1&s&&(e.j41(0,"div",1)(1,"p"),e.EFF(2,"TODO: Not yet implemented"),e.k0s()()),2&s){const n=e.XpG();e.Y8G("formGroup",n.scopesForm)}}let N=(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.pipe((0,bt.$)()).subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangedSub?.unsubscribe()}intialiseForm(){this.scopesForm&&this.ngOnDestroy(),this.scopesForm=this.fb.group({}),this.valueChangedSub=this.scopesForm.valueChanges.subscribe({next:n=>{const a={...this.client};this.clientCache.componentDirtyValidMap.set("scopesForm",this.scopesForm.dirty&&this.scopesForm.valid),this.clientCache.unsavedCache.next(a)}})}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-client-allowed-scopes"]],decls:1,vars:1,consts:[["id","editClientScopes",3,"formGroup",4,"ngIf"],["id","editClientScopes",3,"formGroup"]],template:function(a,r){1&a&&e.DNE(0,gt,3,1,"div",0),2&a&&e.Y8G("ngIf",r.scopesForm)},dependencies:[T.bT,d.cb,d.j4],encapsulation:2})}}return s})();const A=["addBtn"];let yt=(()=>{class s{constructor(n,a,r,u){this.fb=n,this.modalService=a,this.translate=r,this.toastr=u,this.modalId="addEditKeyValueModal",this.modalActions=[q.N.Save],this.dataTableActions=[L.AA.Delete,L.AA.Select],this.onChange=y=>{},this.onTouched=()=>{},this.newKeyValueForm=n.group({index:[0],key:["",[]],value:["",[]]})}ngOnInit(){}openModalForAdd(){this.isNew=!0,this.newKeyValueForm.patchValue({index:-1,key:"",value:""}),this.modalService.showById("addUpdateModal",this.addButtonRef)}openModalForEdit(n){this.isNew=!1,this.newKeyValueForm.patchValue({index:n.data.index,key:n.data[this.keyProperty],value:n.data[this.valueProperty]}),this.modalService.showById("addUpdateModal",this.addButtonRef)}saveAddOrEdit(){const n=this.newKeyValueForm.value.index;if(this.value.findIndex(u=>u[this.keyProperty]==this.newKeyValueForm.value.key&&u[this.valueProperty]==this.newKeyValueForm.value.value)>=0){const u=this.translate.instant("Common.AlreadyExists.Title"),y=`${this.translate.instant(this.entityName)} ${this.translate.instant("Common.AlreadyExists.Message")}`;return void this.toastr.error(y,u)}if(-1===n){const u={};u[this.keyProperty]=this.newKeyValueForm.value.key,u[this.valueProperty]=this.newKeyValueForm.value.value,this.value.push(u)}else this.value[n][this.keyProperty]=this.newKeyValueForm.value.key,this.value[n][this.valueProperty]=this.newKeyValueForm.value.value;const r=this.value.map(u=>{let y={};return y[this.keyProperty]=u[this.keyProperty],y[this.valueProperty]=u[this.valueProperty],y});this.writeValue(r),this.onChange(r)}cancelAddOrUpdate(){this.isNew=!0,this.newKeyValueForm.patchValue({index:-1,key:"",value:""}),this.modalService.hideById("addUpdateModal")}writeValue(n){this.value=n.map((a,r)=>({...a,index:r}))}registerOnChange(n){this.onChange=n}registerOnTouched(n){this.onTouched=n}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(d.ze),e.rXU(tt.B),e.rXU(R.c$),e.rXU($.tw))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-key-value-list-editor"]],viewQuery:function(a,r){if(1&a&&e.GBs(A,5),2&a){let u;e.mGM(u=e.lsd())&&(r.addButtonRef=u.first)}},inputs:{id:"id",entityName:"entityName",keyName:"keyName",keyProperty:"keyProperty",valueName:"valueName",valueProperty:"valueProperty",addTitle:"addTitle",editTitle:"editTitle"},features:[e.Jv_([{provide:d.kq,useExisting:(0,e.Rfq)(()=>s),multi:!0}])],decls:16,vars:29,consts:[["addButton",""],["right",""],[1,"tw-btn-success",3,"click","id"],[3,"onSelect","rows","norowslabel","actions"],[3,"prop","title","headClasses","cellClasses"],[3,"onCancel","onSave","title","saveText","modalId","actions","addDisabled"],[3,"formGroup"],[3,"label","id"],["id","addType","type","text","formControlName","key",1,"tw-form-control","tw-max-w-full"],[3,"label","id","isLast"],["id","addValue","type","text","formControlName","value",1,"tw-form-control","tw-max-w-full"]],template:function(a,r){if(1&a){const u=e.RV6();e.j41(0,"app-action-bar"),e.qex(1,1),e.j41(2,"button",2,0),e.bIt("click",function(){return e.eBV(u),e.Njj(r.openModalForAdd())}),e.EFF(4),e.nI1(5,"translate"),e.nI1(6,"translate"),e.k0s(),e.bVm(),e.k0s(),e.j41(7,"app-data-table",3),e.bIt("onSelect",function(U){return e.eBV(u),e.Njj(r.openModalForEdit(U))}),e.nrm(8,"app-data-table-column",4)(9,"app-data-table-column",4),e.k0s(),e.j41(10,"app-custom-modal",5),e.bIt("onCancel",function(){return e.eBV(u),e.Njj(r.cancelAddOrUpdate())})("onSave",function(){return e.eBV(u),e.Njj(r.saveAddOrEdit())}),e.j41(11,"div",6)(12,"app-form-row",7),e.nrm(13,"input",8),e.k0s(),e.j41(14,"app-form-row",9),e.nrm(15,"input",10),e.k0s()()()}2&a&&(e.R7$(2),e.Y8G("id","addBtn"),e.R7$(2),e.Lme(" ",e.bMT(5,25,"Common.Add")," ",e.bMT(6,27,r.entityName)," "),e.R7$(3),e.Y8G("rows",r.value)("norowslabel","Common.NothingSet")("actions",r.dataTableActions),e.R7$(),e.Y8G("prop",r.keyProperty)("title",r.keyName)("headClasses","md:tw-w-1/3")("cellClasses","tw-max-w-0 tw-truncate"),e.R7$(),e.Y8G("prop",r.valueProperty)("title",r.valueName)("headClasses","tw-hidden sm:tw-table-cell")("cellClasses","tw-hidden tw-max-w-0 tw-truncate sm:tw-table-cell"),e.R7$(),e.Y8G("title",r.isNew?r.addTitle:r.editTitle)("saveText",r.isNew?"Common.Add":"Common.Update")("modalId","addUpdateModal")("actions",r.modalActions)("addDisabled",r.newKeyValueForm.pristine||r.newKeyValueForm.invalid),e.R7$(),e.Y8G("formGroup",r.newKeyValueForm),e.R7$(),e.Y8G("label","Common.Type")("id","addType"),e.R7$(2),e.Y8G("label","Common.Value")("id","addValue")("isLast",!0))},dependencies:[d.me,d.BC,d.cb,d.j4,d.JD,j.Y,et.n,I.G,L.up,D.w,R.D9],encapsulation:2})}}return s})();function Tt(s,b){if(1&s&&(e.j41(0,"div",1),e.nrm(1,"app-key-value-list-editor",2),e.k0s()),2&s){const n=e.XpG();e.Y8G("formGroup",n.claimsForm),e.R7$(),e.Y8G("id","claims")("entityName","Common.Claim")("keyName","Common.Type")("keyProperty","type")("valueName","Common.Value")("valueProperty","value")("addTitle","Clients.AddClaim")("editTitle","Clients.EditClaim")}}let wt=(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangesSub?.unsubscribe()}intialiseForm(){this.claimsForm=this.fb.group({claims:[this.client.claims??[],[]]}),this.valueChangesSub=this.claimsForm.valueChanges.subscribe({next:n=>{const a={...this.client,claims:this.claimsForm.value.claims};this.clientCache.componentDirtyValidMap.set("claimsForm",this.claimsForm.dirty&&this.claimsForm.valid),this.clientCache.unsavedCache.next(a)}})}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-client-claims"]],decls:1,vars:1,consts:[["id","editClientClaims",3,"formGroup",4,"ngIf"],["id","editClientClaims",3,"formGroup"],["formControlName","claims",3,"id","entityName","keyName","keyProperty","valueName","valueProperty","addTitle","editTitle"]],template:function(a,r){1&a&&e.DNE(0,Tt,2,9,"div",0),2&a&&e.Y8G("ngIf",r.claimsForm)},dependencies:[T.bT,d.BC,d.cb,d.j4,d.JD,yt],encapsulation:2})}}return s})();var Rt=l(6719),St=l(251);let Ft=(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-client-advanced"]],decls:6,vars:7,consts:[[3,"pillMode"],[3,"tabTitle","tabValue"],["id","editClientAdvanced"]],template:function(a,r){1&a&&(e.j41(0,"app-custom-tabs",0),e.nrm(1,"app-custom-tab",1)(2,"app-custom-tab",1)(3,"app-custom-tab",1),e.k0s(),e.j41(4,"div",2),e.nrm(5,"router-outlet"),e.k0s()),2&a&&(e.Y8G("pillMode",!0),e.R7$(),e.Y8G("tabTitle","Clients.Endpoints")("tabValue","endpoints"),e.R7$(),e.Y8G("tabTitle","Common.Lifetimes")("tabValue","lifetimes"),e.R7$(),e.Y8G("tabTitle","Common.Properties")("tabValue","properties"))},dependencies:[Rt.G,St.v,h.n3],encapsulation:2})}}return s})();var B=function(s){return s.Authorisation="authorisation",s.Revocation="revocation",s.Token="token",s.RefreshToken="refreshToken",s.Logout="logout",s}(B||{});const Ut=(s,b)=>b.key;function Mt(s,b){if(1&s&&(e.j41(0,"app-form-row",1)(1,"app-form-toggle",2),e.nrm(2,"input",3),e.k0s()()),2&s){const n=b.$implicit,a=b.$index,r=e.XpG(2);e.Y8G("id",n.key)("label","Common."+n.key)("help","Clients."+n.key+"Help")("isLast",a===r.endpointOptions.length-1),e.R7$(),e.Y8G("id",n.key)("isTraffic",!0)("isAlt",!1),e.R7$(),e.Y8G("id",n.key)("formControlName",n.property)}}function It(s,b){if(1&s&&(e.j41(0,"div",0),e.Z7z(1,Mt,3,9,"app-form-row",1,Ut),e.k0s()),2&s){const n=e.XpG();e.Y8G("formGroup",n.endpointsForm),e.R7$(),e.Dyx(n.endpointOptions)}}let Nt=(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangesSub?.unsubscribe()}intialiseForm(){let n={};Object.keys(B).forEach(a=>{n[B[a]]=[this.client.endpoints.includes(a),[]]}),this.endpointsForm=this.fb.group(n),this.valueChangesSub=this.endpointsForm.valueChanges.subscribe({next:a=>{const r={...this.client,endpoints:Object.keys(B).filter(u=>a[B[u]])};this.clientCache.componentDirtyValidMap.set("endpointsForm",this.endpointsForm.dirty&&this.endpointsForm.valid),this.clientCache.unsavedCache.next(r)}})}get endpointOptions(){return Object.keys(B).map(n=>({key:n,property:B[n]}))}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-edit-endpoints"]],decls:1,vars:1,consts:[[3,"formGroup"],[3,"id","label","help","isLast"],[3,"id","isTraffic","isAlt"],["type","checkbox",1,"tw-form-switch__input",3,"id","formControlName"]],template:function(a,r){1&a&&e.DNE(0,It,3,1,"div",0),2&a&&e.vxM(0,r.endpointsForm?0:-1)},dependencies:[d.Zm,d.BC,d.cb,d.j4,d.JD,j.Y,J.m],encapsulation:2})}}return s})();var S=function(s){return s.AuthorisationCode="authorisationCode",s.DeviceCode="deviceCode",s.UserCode="userCode",s.AccessToken="accessToken",s.IdentityToken="identityToken",s.RefreshToken="refreshToken",s}(S||{}),v=l(3806);class jt{static{this.ActionMap=new Map([[S.AuthorisationCode,[{duration:2.5,unit:v.u.Minutes},{duration:5,unit:v.u.Minutes},{duration:10,unit:v.u.Minutes},{duration:null,unit:v.u.Global}]],[S.DeviceCode,[{duration:5,unit:v.u.Minutes},{duration:10,unit:v.u.Minutes},{duration:15,unit:v.u.Minutes},{duration:null,unit:v.u.Global}]],[S.UserCode,[{duration:5,unit:v.u.Minutes},{duration:10,unit:v.u.Minutes},{duration:15,unit:v.u.Minutes},{duration:null,unit:v.u.Global}]],[S.AccessToken,[{duration:30,unit:v.u.Minutes},{duration:1,unit:v.u.Hours},{duration:2,unit:v.u.Hours},{duration:null,unit:v.u.Global}]],[S.IdentityToken,[{duration:10,unit:v.u.Minutes},{duration:20,unit:v.u.Minutes},{duration:30,unit:v.u.Minutes},{duration:null,unit:v.u.Global}]],[S.RefreshToken,[{duration:7,unit:v.u.Days},{duration:14,unit:v.u.Days},{duration:30,unit:v.u.Days},{duration:null,unit:v.u.Global}]]])}}var $t=l(1560);const Gt=(s,b)=>b.key;function Et(s,b){if(1&s&&(e.j41(0,"app-form-row",1),e.nrm(1,"app-lifetime-picker",2),e.k0s()),2&s){const n=b.$implicit,a=b.$index,r=e.XpG(2);e.Y8G("id",n.key)("label","Common."+n.key)("help","Clients."+n.key+"Help")("isLast",a===r.liofetimeOptions.length-1),e.R7$(),e.Y8G("allowNull",!0)("buttons",n.buttons)("id",n.key)("formControlName",n.property)}}function kt(s,b){if(1&s&&(e.j41(0,"div",0),e.Z7z(1,Et,2,8,"app-form-row",1,Gt),e.k0s()),2&s){const n=e.XpG();e.Y8G("formGroup",n.lifetimesForm),e.R7$(),e.Dyx(n.liofetimeOptions)}}const Vt=[{path:"",redirectTo:"details",pathMatch:"full"},{path:"details",component:t},{path:"security",component:Ct},{path:"applicationUrls",component:w},{path:"tokenRequest",component:E},{path:"allowedScopes",component:N},{path:"claims",component:wt},{path:"advanced",component:Ft,children:[{path:"endpoints",component:Nt},{path:"lifetimes",component:(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a,this.lifetimeButtons=[{duration:5,unit:v.u.Minutes},{duration:10,unit:v.u.Minutes},{duration:null,unit:v.u.Global}]}ngOnInit(){this.cacheSub=this.clientCache.unsavedCache$.subscribe({next:n=>{this.client=n,this.intialiseForm()}})}ngOnDestroy(){this.cacheSub?.unsubscribe(),this.valueChangesSub?.unsubscribe()}intialiseForm(){let n={};Object.keys(S).forEach(a=>{n[S[a]]=[this.client.lifetimes[a],[]]}),this.lifetimesForm=this.fb.group(n),this.valueChangesSub=this.lifetimesForm.valueChanges.subscribe({next:a=>{const r=Object.keys(S).filter(U=>!(0,W.hX)(a[S[U]]));let u={};for(let U of r)u[U]=a[S[U]];const y={...this.client,lifetimes:u};this.clientCache.componentDirtyValidMap.set("lifetimesForm",this.lifetimesForm.dirty&&this.lifetimesForm.valid),this.clientCache.unsavedCache.next(y)}})}get liofetimeOptions(){return Object.keys(S).map(n=>({key:n,property:S[n],buttons:jt.ActionMap.get(S[n])}))}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-edit-lifetimes"]],decls:1,vars:1,consts:[[3,"formGroup"],[3,"id","label","help","isLast"],[3,"allowNull","buttons","id","formControlName"]],template:function(a,r){1&a&&e.DNE(0,kt,3,1,"div",0),2&a&&e.vxM(0,r.lifetimesForm?0:-1)},dependencies:[d.BC,d.cb,d.j4,d.JD,j.Y,$t.T],encapsulation:2})}}return s})()},{path:"properties",component:(()=>{class s{constructor(n,a){this.clientCache=n,this.fb=a}ngOnInit(){}static{this.\u0275fac=function(a){return new(a||s)(e.rXU(F.t),e.rXU(d.ze))}}static{this.\u0275cmp=e.VBU({type:s,selectors:[["app-edit-edit-properties"]],decls:2,vars:0,template:function(a,r){1&a&&(e.j41(0,"p"),e.EFF(1,"TODO..."),e.k0s())},encapsulation:2})}}return s})()}]}];let Lt=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[R.h.forChild({extend:!0}),h.iI.forChild(Vt),R.h,h.iI]})}}return s})();var Dt=l(367),xt=l(275),At=l(1993),Bt=l(8455),st=l(4367),H=l(8389),at=l(7677),Yt=l(1683),zt=l(1957),ot=l(4193),lt=l(8251),Pt=l(8906);let Xt=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[T.MD,d.YN,d.X1,R.h,H.w,ot.c,st.N,lt.h]})}}return s})();var _t=l(967);let Wt=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275mod=e.$C({type:s})}static{this.\u0275inj=e.G2t({imports:[T.MD,Dt.m,xt.W,At.E,V.XE,Bt.p,st.N,d.YN,d.X1,H.w,at.N,Lt,Yt.Y,zt.U,ot.c,lt.h,Pt.G,Xt,_t.M]})}}return s})()},9114:(Kt,Y,l)=>{l.r(Y),l.d(Y,{ViewClientModule:()=>j});var T=l(7005),V=l(1583),d=l(1780),h=l(4438);const R=[{path:"",redirectTo:"details",pathMatch:"full"}];let z=(()=>{class M{static{this.\u0275fac=function(G){return new(G||M)}}static{this.\u0275mod=h.$C({type:M})}static{this.\u0275inj=h.G2t({imports:[d.h.forChild({extend:!0}),V.iI.forChild(R),d.h,V.iI]})}}return M})();var e=l(367),F=l(275);let j=(()=>{class M{static{this.\u0275fac=function(G){return new(G||M)}}static{this.\u0275mod=h.$C({type:M})}static{this.\u0275inj=h.G2t({imports:[e.m,F.W,T.XE,z]})}}return M})()}}]);